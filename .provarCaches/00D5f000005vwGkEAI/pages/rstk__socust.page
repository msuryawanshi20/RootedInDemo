<apex:page id="pg" standardController="rstk__socust__c" extensions="rstk.ControllerExtnSocust,rstk.RemoteQueryController" sideBar="true" action="{!doBeforePageLoad}" lightningStyleSheets="{!useLightningStyleSheets}">
    <apex:variable var="o" value="{!rstk__socust__c}" />
    <apex:variable var="f" value="{!$ObjectType.rstk__socust__c.fields}" />
    <apex:variable var="f_socaddr" value="{!$ObjectType.rstk__socaddr__c.fields}" />
    <apex:variable var="f_socontact" value="{!$ObjectType.rstk__socontact__c.fields}" />
    <apex:variable var="f_socustcarr" value="{!$ObjectType.rstk__socustcarr__c.fields}" />
    <apex:variable var="f_socsales" value="{!$ObjectType.rstk__socsales__c.fields}" />
    
    <c:standardHeader cntr="{!controller}" title="{!$Label.rstk__pagetitle_socust}" customInclude="{!$Resource.rstk__socust_cli}" enableAutocomplete="true"/> 
    <apex:stylesheet value="{!$Resource.rstk__ModalPopup_css}"/>
    <apex:includeScript value="{!$Resource.rstk__RowHandler_js}"/> 
    <apex:includeScript value="{!$Resource.rstk__messageformat}"/>
     
    <script>
        var isEdit = {!isEdit};
        var autoNumberCust = {!autoNumberCust};
        var socustId = '{!o.Id}';
        var custName = '{!JSENCODE(o.name)}';
        var initalfincust = "{!o.rstk__socust_fincust__c}";
    	var isRootStockFinancials = "{!isRootStockFinancials}";
        var rsfnsp = "{!rsfnsp}";
        var sycmpid = "{!sycmpid}";
        var customerIsInactive = {! isInactive};
    </script>
    <style>
        .Processing
        {
            position: fixed;
            background: url({!$Resource.rstk__busy});
            background-repeat: no-repeat;
            background-position: center;
            width: 100%;
            height: 100%;
            z-index: 2004;
            left: 0%;
            top: 0%;
        }
    </style>
    <apex:form id="fm" rendered="{!displayPageContent}">
        <apex:actionStatus id="statusProcessing" startStyleClass="Processing"/>
        <apex:actionFunction name="doDelete" action="{!doDelete}" immediate="false"/>
        <apex:actionFunction name="doView" action="{!view}" immediate="true"/>
        <apex:actionFunction name="doEdit" action="{!edit}" immediate="true"/>
        <apex:actionFunction name="doCancel" action="{!cancel}" immediate="true"/>
        <apex:actionFunction name="doListview" action="{!doListview}" immediate="true"/>
        <apex:actionFunction name="doSave" action="{!save}"/>
        <apex:actionFunction name="addCustomerAddress" action="{!addCustomerAddress}"/>
        <apex:actionFunction name="addCustomerContact" action="{!addCustomerContact}"/>
        <apex:actionFunction name="addCustomerCarrier" action="{!addCustomerCarrier}"/>
        <apex:actionFunction name="addCustomerSalesperson" action="{!addCustomerSalesperson}"/>
        <apex:actionFunction name="prevAddrPage" action="{!prevAddrPage}" rerender="pbs_CustAddr" status="statusProcessing"/>
        <apex:actionFunction name="nextAddrPage" action="{!nextAddrPage}" rerender="pbs_CustAddr" status="statusProcessing"/>
        <apex:actionFunction name="prevContactPage" action="{!prevContactPage}" rerender="pbs_Contact" status="statusProcessing"/>
        <apex:actionFunction name="nextContactPage" action="{!nextContactPage}" rerender="pbs_Contact" status="statusProcessing"/>
        <apex:actionFunction name="updateARBalance" action="{!doUpdateARBalance}" 
            oncomplete="unblockUI(); return false;" rerender="socust_arbalance__c, pageMessages" immediate="false" />
        <apex:actionFunction name="updateIntacctARBalance" action="{!doUpdateIntacctARBalance}" 
            oncomplete="unblockUI(); return false;" immediate="false" />
            
        <apex:actionStatus id="waitStatus" onstart="blockUI()" onstop="unblockUI()"/>
        <apex:pageBlock id="pb" mode="detail">
        <apex:pageBlockButtons >
            <c:standardButtons cntr="{!controller}" />
            <apex:commandButton onclick="return doCreateSO();" value="{!$Label.rstk__create_sales_order}" rendered="{!isView}" immediate="true" disabled="{! isInactive}"/>
        </apex:pageBlockButtons>
        
        <apex:outputPanel style="display:none">
            <apex:inputhidden id="socust_id" value="{!o.id}" />
            <apex:inputhidden id="socust_multicurrency" value="{!multicurrency}" />
            <apex:inputhidden id="socust_delete_sfacct_ui__c" value="{!o.rstk__socust_delete_sfacct_ui__c}" />
            <apex:inputCheckbox id="isCreditChng"  value="{!isCreditChng}" rendered="{!isEdit}" />
        </apex:outputPanel>

        <c:Popup popupId="custcustpopup" title="{!$Label.rstk__pagepopup_socustcust_relatedcustomers}" onOk="blockUI();custcust_saveAndClose()">
            <c:PageableGrid pageSize="20" jsController="custcust" data="{!CustcustDetails}" editable="true" ispopup="true"/>
        </c:Popup>
        
        <apex:pageBlockSection id="pbs_Main" showHeader="false" title="{!$Label.rstk__information}" columns="2" >    
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_sf_account__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_sf_account__c.label}" />
                <apex:outputPanel >
                <apex:outputPanel rendered="{!!isEditable}">
                    <apex:outputField value="{!o.rstk__socust_sf_account__c}"/>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!isEditable}">
                    <c:autocomplete id="socust_sf_account__c" cntr="{!controller}" slDesc="{!SfCustName}" 
                      query="select id, name from Account where Id not in (select socust_sf_account__c from socust__c)" minChars="{!sfCustMinChars}" tabIndex="1"/>
                </apex:outputPanel>
                </apex:outputPanel>
            </apex:pageBlockSectionItem>
             
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_soregion__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_soregion__c.label}" />
                <c:selectList id="socust_soregion__c" required="false" cntr="{!controller}" options="{!Soregions}" tabIndex="21"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_sf_account_name__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_sf_account_name__c.label}" />
                <c:inputField id="socust_sf_account_name__c" required="false" cntr="{!controller}" tabIndex="2"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_cresp__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_cresp__c.label}" />
                <c:selectList id="socust_cresp__c" required="false" cntr="{!controller}" options="{!sl.syusrs}" tabIndex="22"/>
            </apex:pageBlockSectionItem>

            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_custno__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_custno__c.label}" />
                <apex:outputPanel >
                    <apex:panelGrid columns="2">
                    <c:inputField id="socust_custno__c" required="{!!autoNumberCust}" cntr="{!controller}" tabIndex="3" />
                    <apex:outputLabel value="{!$Label.rstk__povendvendnoleaveblankforauto}" rendered="{!isNew && autoNumberCust}"/>
                    </apex:panelGrid>
                </apex:outputPanel>
            </apex:pageBlockSectionItem>  
            
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_contact__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_contact__c.label}" />
                <c:largeSelectList id="socust_contact__c" required="false" cntr="{!controller}" options="{!Contacts}" tabIndex="23"/>
            </apex:pageBlockSectionItem>

            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_cclass__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_cclass__c.label}" />
                <c:selectList id="socust_cclass__c" required="true" cntr="{!controller}" options="{!CustClasses}" tabIndex="4"/>
            </apex:pageBlockSectionItem>
            <!-- 
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_dimval__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_dimval__c.label}" />
                <c:largeSelectList id="socust_dimval__c" required="false" cntr="{!controller}" options="{!Dimensions}" tabIndex="24"/>
            </apex:pageBlockSectionItem>
             -->
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_dimval__c.inlineHelpText}">
                 <apex:outputLabel value="{!f.rstk__socust_dimval__c.label}" />
                    <apex:outputPanel >
                        <c:autocomplete id="socust_dimval__c" cntr="{!controller}" slDesc="{!sydimDesc}" 
                            query="" 
                            queryParms="[]"  
                            useCustomAutocomplete="true" 
                            autocompleteController="ControllerExtnSocust"
                            autocompleteMethodParms="fieldId=socust_dimval__c;divID={!divIDValue}"
                            tabIndex="24"/>
                 </apex:outputPanel>
            </apex:pageBlockSectionItem>
            

            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_custcurr__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_custcurr__c.label}" />
                <c:selectList id="socust_custcurr__c" cntr="{!controller}" options="{!Sycurrs}" tabIndex="5"/>
            </apex:pageBlockSectionItem>
            
            <!-- 
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_dimval2__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_dimval2__c.label}" />
                <c:largeSelectList id="socust_dimval2__c" required="false" cntr="{!controller}" options="{!Dimensions2}" tabIndex="25"/>
            </apex:pageBlockSectionItem>  -->
            
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_dimval2__c.inlineHelpText}">
                 <apex:outputLabel value="{!f.rstk__socust_dimval2__c.label}" />
                    <apex:outputPanel >
                        <c:autocomplete id="socust_dimval2__c" cntr="{!controller}" slDesc="{!sydimDesc2}" 
                            query="" 
                            queryParms="[]"  
                            useCustomAutocomplete="true" 
                            autocompleteController="ControllerExtnSocust"
                            autocompleteMethodParms="fieldId=socust_dimval2__c;divID={!divIDValue}"
                            tabIndex="25"/>
                 </apex:outputPanel>
            </apex:pageBlockSectionItem>
            

            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_maintcurrind__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_maintcurrind__c.label}" />
                <c:inputField id="socust_maintcurrind__c" required="false" cntr="{!controller}" tabIndex="6"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_terms__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_terms__c.label}" />
                <c:selectList id="socust_terms__c" required="true" cntr="{!controller}" options="{!Terms}" tabIndex="26"/>
            </apex:pageBlockSectionItem> 

            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_fincust__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_fincust__c.label}"/>
                <apex:outputPanel >
                <c:autocomplete id="socust_fincust__c" cntr="{!controller}" slDesc="{!financialCustName}" required="false"
                     query="select id, name from socust__c where ((socust_inactive__c = false and socust_custcurr__c={!IF(ISNULL(o.rstk__socust_custcurr__c), 'null', '\''+o.rstk__socust_custcurr__c+'\'')} and socust_maintcurrind__c={!o.rstk__socust_maintcurrind__c}){!IF(isNew,'',' or id=\''+o.Id+'\'')})"
                     queryParms="[]"  rendered="{!!isView}"/>
                <apex:outputField value="{!o.rstk__socust_fincust__c}" rendered="{!isView}"/>
              </apex:outputPanel>
            </apex:pageBlockSectionItem>

            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_ltintransit__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_ltintransit__c.label}" />
                <c:inputField id="socust_ltintransit__c" required="false" cntr="{!controller}" tabIndex="27"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_doclanguage__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_doclanguage__c.label}" />
                <c:inputField id="socust_doclanguage__c" required="false" cntr="{!controller}" tabIndex="28"/>
            </apex:pageBlockSectionItem>

            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_fscustid__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_fscustid__c.label}" />
                <c:inputField id="socust_fscustid__c" required="false" cntr="{!controller}" tabIndex="29"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem />

            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_altfscustid__c.inlineHelpText}" >
                <apex:outputLabel value="{!f.rstk__socust_altfscustid__c.label}" />
                <c:inputField id="socust_altfscustid__c" required="false" cntr="{!controller}" tabIndex="30"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem />
            
            <apex:pageBlockSectionItem helpText="{!f.rstk__socust_financecompany__c.inlineHelpText}" rendered="{!isCSG}">
                <apex:outputLabel value="{!f.rstk__socust_financecompany__c.label}" />
                <c:inputField id="socust_financecompany__c" required="false" cntr="{!controller}" tabIndex="30"/>
            </apex:pageBlockSectionItem>
        </apex:pageBlockSection>
        <br />
        <apex:commandButton onclick="return doAcctInquiry();" value="{!$Label.rstk__pagebtn_socust_customeraccountinquiry}" rendered="{!isEdit || isView}" immediate="true"/>
        <apex:commandbutton value="{!$Label.rstk__pagepopup_socustcust_relatedcustomers}" onclick="_showDialog('custcustpopup',1200);return false;" rendered="{!isEdit || isView}" style="width:140px;"/>
        <br />
        <apex:tabPanel switchType="client" selectedTab="tab_Credit" id="theTabPanel">
            <apex:tab label="{!$Label.rstk__pagetab_socust_credit}" name="tab_Credit" id="tab_Credit">
                <apex:pageBlockSection id="pbs_Credit" showHeader="false" columns="2">
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_maxunbilled__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_maxunbilled__c.label}"/>
                        <c:inputField id="socust_maxunbilled__c" required="false" cntr="{!controller}" tabIndex="101"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_resalecert__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_resalecert__c.label}"/>
                        <c:inputField id="socust_resalecert__c" required="false" cntr="{!controller}" tabIndex="121"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_unbilledorders__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_unbilledorders__c.label}"/>
                        <apex:outputField id="socust_unbilledorders__c" value="{!o.rstk__socust_unbilledorders__c}"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_taxexempt__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_taxexempt__c.label}"/>
                        <c:inputField id="socust_taxexempt__c" required="false" cntr="{!controller}" tabIndex="122"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_creditlimit__c.inlineHelpText}">
                     <apex:outputLabel value="{!f.rstk__socust_creditlimit__c.label}"/>
                        <apex:outputPanel >	                       
	                       <apex:inputField id="socust_creditlimit__c" value="{!o.rstk__socust_creditlimit__c}" rendered="{!!isView}" />
	                       <apex:outputField value="{!o.rstk__socust_creditlimit__c}" rendered="{!isView}" /> 
	                    </apex:outputPanel>
                        
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_credithold__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_credithold__c.label}"/>
                        <c:inputField id="socust_credithold__c" required="false" cntr="{!controller}" tabIndex="123"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_arbalance__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_arbalance__c.label}"/>
                        <apex:outputPanel >
                            <apex:outputField id="socust_arbalance__c" value="{!o.rstk__socust_arbalance__c}"/> &nbsp; &nbsp;
                            <apex:commandButton id="btn_updateARBalance" value="{!$Label.rstk__pagebtn_socust_updatearbalance}" onclick="updateARBalance(); return false;" rendered="{!actionType == 'edit' && isAccsysExists}" />
                            <!--added on 09-June-2015 by SaasFocus-->
                            <apex:commandButton id="btn_updateIntacctARBalance" value="{!$Label.rstk__pagebtn_socust_updateintacctarbalance}" onclick="updateIntacctARBalance(); return false;" rendered="{!actionType == 'edit' && isIntacct}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_manualhold__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_manualhold__c.label}"/>
                        <c:inputField id="socust_manualhold__c" required="false" cntr="{!controller}" tabIndex="103"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem />
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_prepayonly__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_prepayonly__c.label}"/>
                        <c:inputField id="socust_prepayonly__c" required="false" cntr="{!controller}" tabIndex="124"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_vatid__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_vatid__c.label}"/>
                        <c:inputField id="socust_vatid__c" required="false" cntr="{!controller}" tabIndex="104"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem />
                    
                    <apex:pageBlockSectionItem rendered="{!currencyUtil.altCurrency}">
                       <apex:outputPanel styleclass="standout">
                        {!$Label.rstk__title_limitsandbalancesincustomerscurrency}:<c:hoverDetail recId="{!o.rstk__socust_custcurr__c}" recName="{!o.socust_custcurr__r.rstk__sycurr_currency__c}"/>
                       </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem rendered="{!!currencyUtil.altCurrency}"/>

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_inactive__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_inactive__c.label}"/>
                        <c:inputField id="socust_inactive__c" required="false" cntr="{!controller}" tabIndex="125"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_taxidnumber__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_taxidnumber__c.label}"/>
                        <c:inputField id="socust_taxidnumber__c" required="false" cntr="{!controller}" tabIndex="105"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_taxidverified__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_taxidverified__c.label}"/>
                        <c:inputField id="socust_taxidverified__c" required="false" cntr="{!controller}" tabIndex="126"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_bypassunbilled__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_bypassunbilled__c.label}"/>
                        <c:inputField id="socust_bypassunbilled__c" required="false" cntr="{!controller}" tabIndex="106"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_avaentitycode__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_avaentitycode__c.label}"/>
                        <c:inputField id="socust_avaentitycode__c" required="false" cntr="{!controller}" tabIndex="127"/>
                    </apex:pageBlockSectionItem>

                </apex:pageBlockSection>
            </apex:tab>
            <br />
            <apex:tab label="{!$Label.rstk__pagetab_socust_salesorderdefaults}" name="tab_SalesOrder" id="tab_SalesOrder">
                <apex:pageBlockSection id="pbs_SalesOrder" showHeader="false" columns="2">
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_dfltprodtype__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_dfltprodtype__c.label}"/>
                        <c:inputField id="socust_dfltprodtype__c" required="false" cntr="{!controller}" tabIndex="201"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_otype__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_otype__c.label}" />
                        <c:selectList id="socust_otype__c" required="false" cntr="{!controller}" options="{!OrderTypes}" tabIndex="207"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_prodind__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_prodind__c.label}"/>
                        <c:inputField id="socust_prodind__c" required="false" cntr="{!controller}" tabIndex="202"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_agreement__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_agreement__c.label}" />
                        <c:selectList id="socust_agreement__c" required="false" cntr="{!controller}" options="{!Agreements}" tabIndex="208"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_serviceind__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_serviceind__c.label}"/>
                        <c:inputField id="socust_serviceind__c" required="false" cntr="{!controller}" tabIndex="203"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_project__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_project__c.label}" />
                         <c:autocomplete id="socust_project__c" required="false" slDesc="{!projectDesc}" cntr="{!controller}" 
                            query="select id, name from pjproj__c where pjproj_div__r.sydiv_cmpno__c = '{!currDivision.rstk__sydiv_cmpno__c}' and pjproj_completed__c = false"
                            tabIndex="209"/>
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_linediscpct__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_linediscpct__c.label}"/>
                        <c:inputField id="socust_linediscpct__c" required="false" cntr="{!controller}" tabIndex="204"/>
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem />                   

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_discpct__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_discpct__c.label}"/>
                        <c:inputField id="socust_discpct__c" required="false" cntr="{!controller}" tabIndex="205"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_oresp__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_oresp__c.label}" />
                        <c:selectList id="socust_oresp__c" required="false" cntr="{!controller}" options="{!sl.syusrs}" tabIndex="210"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_proddisc__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_proddisc__c.label}"/>
                        <c:inputField id="socust_proddisc__c" required="false" cntr="{!controller}" tabIndex="206"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_asnreqd__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_asnreqd__c.label}" />
                        <c:inputField id="socust_asnreqd__c" required="false" cntr="{!controller}" tabIndex="211"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_bestprice__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_bestprice__c.label}" />
                        <c:inputField id="socust_bestprice__c" required="false" cntr="{!controller}" tabIndex="207"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_asnmethod__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_asnmethod__c.label}"/>
                        <c:inputField id="socust_asnmethod__c" required="false" cntr="{!controller}" tabIndex="212"/>
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_nopartials__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_nopartials__c.label}" />
                        <c:inputField id="socust_nopartials__c" required="false" cntr="{!controller}" tabIndex="208"/>
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_sopbk__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_sopbk__c.label}" />
                        <c:selectList id="socust_sopbk__c" cntr="{!controller}" options="{!priceBooks}" tabIndex="213" />
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem />
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_syvatclass__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_syvatclass__c.label}" />
                        <c:selectList id="socust_syvatclass__c" cntr="{!controller}" options="{!syvatclassSelectoptions}" tabIndex="214" />
                    </apex:pageBlockSectionItem>

                </apex:pageBlockSection>
            </apex:tab>
            
            <apex:tab label="{!$Label.rstk__pagetab_socust_shipping}" name="tab_Shipping" id="tab_Shipping"> 
                <apex:pageBlockSection id="pbs_Shipping" showHeader="false" title="{!$Label.rstk__information}" columns="2" >
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_carrier__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_carrier__c.label}" />
                        <c:selectList id="socust_carrier__c" required="true" cntr="{!controller}" options="{!Carriers}" tabIndex="301" />
                    </apex:pageBlockSectionItem>
                
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_shipviatype__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_shipviatype__c.label}" />
                        <c:selectList id="socust_shipviatype__c" required="true" cntr="{!controller}" options="{!ShipMethods}" tabIndex="321"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_fob__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_fob__c.label}" />
                        <c:selectList id="socust_fob__c" required="true" cntr="{!controller}" options="{!FOBs}" tabIndex="302"/>
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_frghtrm__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_frghtrm__c.label}" />
                        <c:selectList id="socust_frghtrm__c" required="true" cntr="{!controller}" options="{!FreightTerms}" tabIndex="322"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_sozone__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_sozone__c.label}" />
                        <c:selectList id="socust_sozone__c" cntr="{!controller}" options="{!Zones}" tabIndex="303"/>
                    </apex:pageBlockSectionItem>   
                </apex:pageBlockSection>
            </apex:tab>
            
            <apex:tab label="{!$Label.rstk__pagetab_socust_invoicing}" name="tab_invoicing" id="tab_invoicing">
                <apex:pageBlockSection id="pbs_invoicing" showHeader="false" title="{!$Label.rstk__information}" columns="2" >
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_rsigroupopt__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_rsigroupopt__c.label}"/>
                        <c:inputField id="socust_rsigroupopt__c" required="false" cntr="{!controller}" tabIndex="331"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_rsisortopt__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_rsisortopt__c.label}"/>
                        <c:inputField id="socust_rsisortopt__c" required="false" cntr="{!controller}" tabIndex="333"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_noinvemail__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_noinvemail__c.label}"/>
                        <c:inputField id="socust_noinvemail__c" required="false" cntr="{!controller}" tabIndex="332"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_sellerpaysbc__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_sellerpaysbc__c.label}"/>
                        <c:inputField id="socust_sellerpaysbc__c" required="false" cntr="{!controller}" tabIndex="334"/>
                    </apex:pageBlockSectionItem>
                    
                </apex:pageBlockSection>
            </apex:tab>

            <apex:tab label="{!$Label.rstk__pagetab_socust_emailtemplates}" name="tab_emailtemplates" id="tab_emailtemplates"> 
                <apex:pageBlockSection id="pbs_emailtemplates" showHeader="false" columns="1" >
                        <apex:pageBlockSectionItem helpText="{!f.rstk__socust_emailtack__c.inlineHelpText}">
                            <apex:outputLabel value="{!f.rstk__socust_emailtack__c.label}"/>
                            <apex:outputPanel >
                                <apex:outputPanel rendered="{!!isView}">
                                    <apex:outputPanel id="soackemailtmpl_select">
                                        <c:selectList id="socust_emailtack__c"  cntr="{!controller}" required="false" options="{!SOAckEmailTemplates}" tabIndex="410"/>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                                <apex:outputText value="{!SOAckEmailTemplateName}" rendered="{!isView}" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem helpText="{!f.rstk__socust_emailtquote__c.inlineHelpText}">
                            <apex:outputLabel value="{!f.rstk__socust_emailtquote__c.label}"/>
                            <apex:outputPanel >
                                <apex:outputPanel rendered="{!!isView}">
                                    <apex:outputPanel id="quoteemailtmpl_select">
                                        <c:selectList id="socust_emailtquote__c"  cntr="{!controller}" required="false" options="{!QuoteEmailTemplates}" tabIndex="420"/>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                                <apex:outputText value="{!QuoteEmailTemplateName}" rendered="{!isView}" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem helpText="{!f.rstk__socust_emailtinv__c.inlineHelpText}">
                            <apex:outputLabel value="{!f.rstk__socust_emailtinv__c.label}"/>
                            <apex:outputPanel >
                                <apex:outputPanel rendered="{!!isView}">
                                    <apex:outputPanel id="soackemailtmpl_select">
                                        <c:selectList id="socust_emailtinv__c"  cntr="{!controller}" required="false" options="{!InvoiceEmailTemplates}" tabIndex="430"/>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                                <apex:outputText value="{!InvoiceEmailTemplateName}" rendered="{!isView}" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem helpText="{!f.rstk__socust_emailtpack__c.inlineHelpText}">
                            <apex:outputLabel value="{!f.rstk__socust_emailtpack__c.label}"/>
                            <apex:outputPanel >
                                <apex:outputPanel rendered="{!!isView}">
                                    <apex:outputPanel id="soackemailtmpl_select">
                                        <c:selectList id="socust_emailtpack__c"  cntr="{!controller}" required="false" options="{!PackingSlipEmailTemplates}" tabIndex="440"/>
                                    </apex:outputPanel>
                                </apex:outputPanel>
                                <apex:outputText value="{!PackingSlipEmailTemplateName}" rendered="{!isView}" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                </apex:pageBlockSection>
            </apex:tab>

            <apex:tab label="{!$Label.rstk__pagetab_socust_url}" name="tab_URL" id="tab_URL">
                <apex:pageBlockSection id="pbs_URL" showHeader="false" title="{!$Label.rstk__information}" columns="2" >  
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_website__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_website__c.label}" />
                        <c:inputField id="socust_website__c" required="false" cntr="{!controller}" tabIndex="501"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_urlvideo__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_urlvideo__c.label}" />
                        <c:inputField id="socust_urlvideo__c" required="false" cntr="{!controller}" tabIndex="521" />
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_urlimage__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_urlimage__c.label}" />
                        <c:inputField id="socust_urlimage__c" required="false" cntr="{!controller}" tabIndex="502" />
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_urldoc__c.inlineHelpText}" >
                        <apex:outputLabel value="{!f.rstk__socust_urldoc__c.label}" />
                        <c:inputField id="socust_urldoc__c" required="false" cntr="{!controller}" tabIndex="522" />
                    </apex:pageBlockSectionItem>
                </apex:pageBlockSection>
            </apex:tab>
            
            <apex:tab label="{!$Label.rstk__pagetab_socntl_configurator}" name="tab_Configurator" id="tab_Configurator" rendered="{!isConfigsoe}">
                <apex:pageBlockSection id="pbs_Configurator" showHeader="false" columns="2" >
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_overconfigs__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_overconfigs__c.label}"/>
                        <c:inputField id="socust_overconfigs__c" required="false" cntr="{!controller}" tabIndex="503"/>
                    </apex:pageBlockSectionItem>
                       
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_dfltconfigprod__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_dfltconfigprod__c.label}"/>
                        <c:largeSelectList id="socust_dfltconfigprod__c" cntr="{!controller}" options="{!Cfgprods}" tabIndex="524"/>
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_showconfigcost__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_showconfigcost__c.label}"/>
                        <c:inputField id="socust_showconfigcost__c" required="false" cntr="{!controller}" tabIndex="504"/>
                    </apex:pageBlockSectionItem>
                       
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_dfltexportcust__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_dfltexportcust__c.label}"/>
                        <c:autocomplete id="socust_dfltexportcust__c" cntr="{!controller}" query="select id, name from socust__c" width="200px"
                            tabIndex="525" slDesc="{!dfltExportcust}" />
                    </apex:pageBlockSectionItem>

                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_showprice1__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_showprice1__c.label}"/>
                        <c:inputField id="socust_showprice1__c" required="false" cntr="{!controller}" tabIndex="505"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_price1label__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_price1label__c.label}"/>
                        <c:inputField id="socust_price1label__c" required="false" cntr="{!controller}" tabIndex="526"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_showprice2__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_showprice2__c.label}"/>
                        <c:inputField id="socust_showprice2__c" required="false" cntr="{!controller}" tabIndex="506"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_price2label__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_price2label__c.label}"/>
                        <c:inputField id="socust_price2label__c" required="false" cntr="{!controller}" tabIndex="527"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_hideexcluded__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_hideexcluded__c.label}"/>
                        <c:inputField id="socust_hideexcluded__c" required="false" cntr="{!controller}" tabIndex="507"/>
                    </apex:pageBlockSectionItem>
                       
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_chgaltprice1__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_chgaltprice1__c.label}"/>
                        <c:inputField id="socust_chgaltprice1__c" required="false" cntr="{!controller}" tabIndex="528"/>
                    </apex:pageBlockSectionItem>
                       
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_suppprice__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_suppprice__c.label}"/>
                        <c:inputField id="socust_suppprice__c" required="false" cntr="{!controller}" tabIndex="508"/>
                    </apex:pageBlockSectionItem>
                       
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_chgaltprice2__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_chgaltprice2__c.label}"/>
                        <c:inputField id="socust_chgaltprice2__c" required="false" cntr="{!controller}" tabIndex="529"/>
                    </apex:pageBlockSectionItem>
                       
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_conffromsopc__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_conffromsopc__c.label}"/>
                        <c:inputField id="socust_conffromsopc__c" required="false" cntr="{!controller}" tabIndex="509"/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f.rstk__socust_noconsolcomp__c.inlineHelpText}">
                        <apex:outputLabel value="{!f.rstk__socust_noconsolcomp__c.label}"/>
                        <c:inputField id="socust_noconsolcomp__c" required="false" cntr="{!controller}" tabIndex="530"/>
                    </apex:pageBlockSectionItem>
                </apex:pageBlockSection>
            </apex:tab>
            
            <apex:tab label="{!$Label.rstk__pagetab_socust_customeraddresses}" name="tab_CustAddress" id="tab_CustAddress" rendered="{!actionType != 'create'}">
                <apex:pageBlockSection id="pbs_CustAddr" showHeader="false" title="{!$Label.rstk__information}" columns="1" >
                    <apex:outputPanel >
                        <apex:outputLink value="{!URLFOR($Action.rstk__socaddr__c.New)}{!ReturnUrlParms}" rendered="{!!Addresspolicy}">{!$Label.rstk__pagelink_socust_newcustomeraddress}</apex:outputLink>&nbsp;&nbsp;&nbsp;&nbsp;
                        <apex:outputPanel rendered="{!OR(dispNextAddr, dispPrevAddr)}">
                            <apex:outputLink value="javascript:prevAddrPage()" styleclass="next" disabled="{!!dispPrevAddr}">&lt;{!$Label.PreviousPage}</apex:outputLink>&nbsp;|&nbsp;
                            <apex:outputLink value="javascript:nextAddrPage()" styleclass="next" disabled="{!!dispNextAddr}">{!$Label.NextPage}&gt;</apex:outputLink>
                        </apex:outputPanel>
                    </apex:outputPanel>
                    <!-- input type="button" value="New Customer Address" class="btn" onclick="addCustomerAddress();return false;"/ -->
                    <apex:pageBlockTable value="{!socaddrs}" var="caddr">
                        <apex:column headerValue="{!$Label.rstk__action}" rendered="{!!Addresspolicy}">
                            <apex:outputLink value="{!URLFOR($Action.rstk__socaddr__c.Edit, caddr.id)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_edit}</apex:outputLink> | <apex:outputLink value="{!URLFOR($Action.rstk__socaddr__c.View, caddr.id)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_notesandattachments_del}</apex:outputLink>
                        </apex:column>
                        <apex:column headerValue="{!$Label.rstk__action}" rendered="{!Addresspolicy}">
                            <apex:outputLink value="{!URLFOR($Action.rstk__socaddr__c.View, caddr.id)}{!ReturnUrlParms}">{!$Label.rstk__pagebtn_confsel_view}</apex:outputLink>
                        </apex:column>
                        <apex:column headerValue="{!$Label.rstk__seq}"><apex:outputField id="socaddr_seq__c" value="{!caddr.rstk__socaddr_seq__c}"/></apex:column>
                        <!-- <apex:column value="{!caddr.rstk__socaddr_name__c}" /> -->
                        <apex:column headerValue="{!$Label.rstk__name}"><apex:outputLink value="{!URLFOR($Action.rstk__socaddr__c.View, caddr.id)}{!ReturnUrlParms}">{!caddr.rstk__socaddr_name__c}</apex:outputLink></apex:column>
                        <apex:column headerValue="{!$Label.rstk__address1}"><apex:outputField id="socaddr_address1__c" value="{!caddr.rstk__socaddr_address1__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__address2}"><apex:outputField id="socaddr_address2__c" value="{!caddr.rstk__socaddr_address2__c}"/></apex:column>
                        <apex:column headerValue="{!f_socaddr.rstk__socaddr_city__c.label}"><apex:outputField id="socaddr_city__c" value="{!caddr.rstk__socaddr_city__c}"/></apex:column>
                        <apex:column headerValue="{!f_socaddr.rstk__socaddr_state__c.label}"><apex:outputField id="socaddr_state__c" value="{!caddr.rstk__socaddr_state__c}"/></apex:column>
                        <apex:column headerValue="{!f_socaddr.rstk__socaddr_zip__c.label}"><apex:outputField id="socaddr_zip__c" value="{!caddr.rstk__socaddr_zip__c}"/></apex:column>
                        <apex:column headerValue="{!f_socaddr.rstk__socaddr_country__c.label}"><apex:outputField id="socaddr_country__c" value="{!caddr.rstk__socaddr_country__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__phone}"><apex:outputField id="socaddr_phone__c" value="{!caddr.rstk__socaddr_phone__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__email}"><apex:outputField id="socaddr_email__c" value="{!caddr.rstk__socaddr_email__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__asbillto}"><apex:outputField id="socaddr_useasbillto__c" value="{!caddr.rstk__socaddr_useasbillto__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__dfltbillto}"><apex:outputField id="socaddr_defaultbillto__c" value="{!caddr.rstk__socaddr_defaultbillto__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__asack}"><apex:outputField id="socaddr_useasack__c" value="{!caddr.rstk__socaddr_useasack__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__dfltack}"><apex:outputField id="socaddr_defaultack__c" value="{!caddr.rstk__socaddr_defaultack__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__asshipto}"><apex:outputField id="socaddr_useasshipto__c" value="{!caddr.rstk__socaddr_useasshipto__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__dfltshipto}"><apex:outputField id="socaddr_defaultshipto__c" value="{!caddr.rstk__socaddr_defaultshipto__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__asinstall}"><apex:outputField id="socaddr_useasinstall__c" value="{!caddr.rstk__socaddr_useasinstall__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__dfltinstall}"><apex:outputField id="socaddr_defaultinstall__c" value="{!caddr.rstk__socaddr_defaultinstall__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__verified}"><apex:outputField id="socaddr_verified__c" value="{!caddr.rstk__socaddr_verified__c}"/></apex:column>
                        <apex:column headerValue="{!f_socaddr.rstk__socaddr_locationref__c.label}"><apex:outputField id="socaddr_locationref__c" value="{!caddr.rstk__socaddr_locationref__c}"/></apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:tab>
            
            <apex:tab label="{!$Label.rstk__pagetab_socust_customercontacts}" name="tab_Contact" id="tab_Contact" rendered="{!actionType != 'create'}">
                <apex:pageBlockSection id="pbs_Contact" showHeader="false" title="{!$Label.rstk__information}" columns="1" >
                    <apex:outputPanel >
                        <apex:outputLink value="{!URLFOR($Action.rstk__socontact__c.New)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_socust_newcustomercontact}</apex:outputLink>&nbsp;&nbsp;&nbsp;&nbsp;
                        <apex:outputPanel rendered="{!OR(dispNextContact, dispPrevContact)}">
                            <apex:outputLink value="javascript:prevContactPage()" styleclass="next" disabled="{!!dispPrevContact}">&lt;{!$Label.PreviousPage}</apex:outputLink>&nbsp;|&nbsp;
                            <apex:outputLink value="javascript:nextContactPage()" styleclass="next" disabled="{!!dispNextContact}">{!$Label.NextPage}&gt;</apex:outputLink>
                        </apex:outputPanel>
                    </apex:outputPanel>
                    
                    <!-- input type="button" value="New Customer Contact" class="btn" onclick="addCustomerContact();return false;"/ -->
                    <apex:pageBlockTable value="{!socontacts}" var="contact">
                        <apex:column headerValue="{!$Label.rstk__action}"><apex:outputLink value="{!URLFOR($Action.rstk__socontact__c.Edit, contact.id)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_edit}</apex:outputLink> | <apex:outputLink value="{!URLFOR($Action.rstk__socontact__c.View, contact.id)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_notesandattachments_del}</apex:outputLink></apex:column>
                        <apex:column headerValue="{!$Label.rstk__name}"><apex:outputField id="socontact_contact__c" value="{!contact.rstk__socontact_contact__c}" /></apex:column>
                        <apex:column headerValue="{!$Label.rstk__phone}"><apex:outputField id="socontact_phone__c" value="{!contact.rstk__socontact_phone__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__email}"><apex:outputField id="socontact_email__c" value="{!contact.rstk__socontact_email__c}"/></apex:column>
                        <apex:column headerValue="{!f_socontact.rstk__socontact_fax__c.label}"><apex:outputField id="socontact_fax__c" value="{!contact.rstk__socontact_fax__c}"/></apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:tab>
            
            <apex:tab label="{!$Label.rstk__pagetab_socust_carriersbycustomer}" name="tab_Carrier" id="tab_Carrier" rendered="{!actionType != 'create'}">
                <apex:pageBlockSection id="pbs_Carrier" showHeader="false" title="{!$Label.rstk__information}" columns="1" >
                    <apex:outputLink value="{!URLFOR($Action.rstk__socustcarr__c.New)}{!ReturnUrlParms}">{!$Label.rstk__newcarriersbycustomer}</apex:outputLink>
                    <!-- input type="button" value="New Carriers by Customer" class="btn" onclick="addCustomerCarrier();return false;"/ -->
                    <apex:pageBlockTable value="{!socustcarr}" var="custcarr">
                        <apex:column headerValue="{!$Label.rstk__action}"><apex:outputLink value="{!URLFOR($Action.rstk__socustcarr__c.Edit, custcarr.id)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_edit}</apex:outputLink> | <apex:outputLink value="{!URLFOR($Action.rstk__socustcarr__c.View, custcarr.id)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_notesandattachments_del}</apex:outputLink></apex:column>
                        <apex:column headerValue="{!$Label.rstk__carriercode}"><apex:outputField id="socustcarr_carrier__c" value="{!custcarr.socustcarr_carrier__r.rstk__sycarrier_id__c}" /></apex:column>
                        <apex:column headerValue="{!$Label.rstk__customeraccount}"><apex:outputField id="socustcarr_acct__c" value="{!custcarr.rstk__socustcarr_acct__c}"/></apex:column>
                        <apex:column headerValue="{!f_socustcarr.rstk__socustcarr_comments__c.label}"><apex:outputField id="socustcarr_comments__c" value="{!custcarr.rstk__socustcarr_comments__c}"/></apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:tab>
            
            <apex:tab label="{!$Label.rstk__pagetab_socust_customercommissionschedule}" name="tab_Salesperson" id="tab_Salesperson" rendered="{!actionType != 'create'}">
                <apex:pageBlockSection id="pbs_Salesperson" showHeader="false" title="{!$Label.rstk__information}" columns="1" >
                    <apex:outputLink value="{!URLFOR($Action.rstk__socsales__c.New)}{!ReturnUrlParms}">{!$Label.rstk__new_customer_commission_schedule}</apex:outputLink>
                    <!-- input type="button" value="New Customer Commission Schedule" class="btn" onclick="addCustomerSalesperson();return false;"/ -->
                    <apex:pageBlockTable value="{!socsales}" var="csales">
                        <apex:column headerValue="{!$Label.rstk__action}"><apex:outputLink value="{!URLFOR($Action.rstk__socsales__c.Edit, csales.id)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_edit}</apex:outputLink> | <apex:outputLink value="{!URLFOR($Action.rstk__socsales__c.View, csales.id)}{!ReturnUrlParms}">{!$Label.rstk__pagelink_notesandattachments_del}</apex:outputLink></apex:column>
                        <apex:column headerValue="{!$Label.rstk__salesperson}"><apex:outputField id="socsales_spersn__c" value="{!csales.name}" /></apex:column>
                        <apex:column headerValue="{!f_socsales.rstk__socsales_compct__c.label}"><apex:outputField id="socsales_compct__c" value="{!csales.rstk__socsales_compct__c}"/></apex:column>
                        <apex:column headerValue="{!$Label.rstk__splitpct}"><apex:outputField id="socsales_split__c" value="{!csales.rstk__socsales_split__c}"/></apex:column>
                    </apex:pageBlockTable>
                </apex:pageBlockSection>
            </apex:tab>
            <apex:tab label="{!customFieldTabName}" name="tab_Custom" id="tab_Custom" rendered="{!hasCustomFields}">
                <c:customFields cntr="{!controller}" cols="2"/>
            </apex:tab>
            <apex:tab label="{!$Label.rstk__pagetab_socust_info}" name="tab_Info" id="tab_Info">
                <c:infoSection cntr="{!controller}" showHeader="false" displayOwner="true"/>
            </apex:tab>
        </apex:tabPanel>
    </apex:pageBlock>
    </apex:form>
    <br />

    <div id="pleaseWaitPopup" style="display:none">
        <apex:outputPanel styleClass="topPopupBackground" layout="block"/>
        <apex:outputPanel styleClass="topPopup">
           <apex:image url="{!$Resource.rstk__busy}"/>
        </apex:outputPanel>
    </div>
    
    <apex:relatedList list="socustgateways__r" subject="{!o.id}" rendered="{!isView}"/> 
	
    <c:footerInclude cntr="{!controller}" />
    
    <div id="DeleteOptions" style="display:none">
        <p><b><label>{!$Label.Also_Delete_SF_Account}</label><input type="checkbox" id="delsfacct" /></b></p>
        <p><input id="DeleteOpt" type="button" value="{!$Label.BasicGrid_Delete}" onclick="taskParms['delrsonly'] = jQuery('#delrsonly').is(':checked')?'T':'F'; taskParms['delsfacct'] = jQuery('#delsfacct').is(':checked')?'T':'F'; performDeleteAction();"/><input type="button" value="{!$Label.pagebtn_socust_Cancel}" onclick="delete taskParms['delrsonly']; unblockUI();"/></p>
    </div>
 
    <script>
    
        custcust.validate = function() {
            var self = this;
            var valid = true;
            self.getSelectableRows().each(function (index, el) {
                var row = jQuery(this);
                var socust1 = self.getRowValue(row, 'socustcust_socust1__c');
                var socust2 = self.getRowValue(row, 'socustcust_socust2__c');
                if (isEmpty(socust1)) {
                    alert("{!$Label.enterPrimaryCustomer}");
                    valid = false;
                }
                
                else if (isEmpty(socust2)) {
                    alert("{!$Label.enterSecondaryCustomer}");              
                    valid = false;
                }
                
                else if(socust1 != socustId && socust2 != socustId) {
                    alert("{!$Label.oneOfPrimarySecondaryCustMustBe}", custName);  
                    valid = false;
                }
                else if(socust1 == socustId && socust2 == socustId) {
                    alert("{!$Label.bothPrimarySecCustCantBe}", custName);
                    valid = false;
                }
            });
            
            if(!valid) unblockUI();
            
            return valid;
        }
                
        custcust.entryChanged = function(row, rowNum, name, value) {
            if (name == 'socustcust_socust1__c') {
                if (value && value != socustId) {
                    var self = this;
                    var socust2 = self.getRowValue(row, 'socustcust_socust2__c');
                    if(!socust2 || socust2.length == 0) {
                        custcust.setRowValue(row, "socustcust_socust2__c", socustId);
                    }
                }
            }
        }
        
        custcust.onSaveFailed = function() {
            unblockUI();
       }
       
       custcust.onSaved = function() {
            unblockUI();
       }
        
    </script>

    <script>
        var AcctNameMightSFAccount = "{!$Label.AcctNameMightInSFAccount}";  
        var ProvideSFCustName = "{!$Label.PleaseProvideSFCustName}";
        var ProvideResaleCertificate = "{!$Label.PleaseProvideTheResaleCertificate}";   
        var allowDeleteAccount = {!allowDeleteAccount}; 
        var LABEL_SalesforceAccReqd = "{!$Label.SalesforceAccReqd}";
        var LABEL_OneOrMoreSOExist_CurrencyWillNotBeCharged = "{!$Label.OneOrMoreSOExist_CurrencyWillNotBeCharged}";
        var LABEL_SFAccAlreadyExistsWithAccNum_SelDiffCustNumVal = "{!$Label.SFAccAlreadyExistsWithAccNum_SelDiffCustNumVal}";
        var LABEL_PercFrom0To100 = "{!$Label.PercFrom0To100}";
        var LABEL_EnterReqdFieldCustNum = "{!$Label.EnterReqdFieldCustNum}";
        var LABEL_SFAccAlreadyInOtherRSCust_ReEnter = "{!$Label.SFAccAlreadyInOtherRSCust_ReEnter}";
        var LABEL_Warning_SFAccDoesntSetAccReceivableControlYet_GoToSFAccPgToSetARControl = "{!$Label.Warning_SFAccDoesntSetAccReceivableControlYet_GoToSFAccPgToSetARControl}";
        var LABEL_Invalidvaluefor = "{!$Label.Invalidvaluefor}";
        var LABEL_WantToDelThisCust = "{!$Label.WantToDelThisCust}";
        var LABEL_AlsoWantToDelAssocSFAcc = "{!$Label.AlsoWantToDelAssocSFAcc}";
        var LABEL_WarningCreditCheckingCustomerChanged = "{!f.rstk__socust_fincust__c.label}: {!$Label.warningCreditCheckingCustomerChanged}";
        var Label_SocustSocclassIsRequired = "{!$Label.SocustSocclassIsRequired}";
        var LABEL_SoCustomerIsInactive = "{! $Label.Customer_is_Inactive}";
    </script>
    <apex:dynamicComponent componentValue="{!DynamicRelatedLists}" rendered="{!isView}"/>
</apex:page>