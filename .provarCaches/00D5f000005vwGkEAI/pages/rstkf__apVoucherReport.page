<apex:page id="pg" title="{!$Label.rstkf__voucher_edit_list}" docType="html-5.0" standardController="rstkf__apinvh__c" extensions="rstkf.ControllerExtnAPVoucherReport" action="{!doBeforePageLoad}">
<apex:variable var="f" value="{!$ObjectType.rstkf__apinvh__c.fields}" />
<apex:variable var="f_apinvtxn" value="{!$ObjectType.rstkf__apinvtxn__c.fields}" />
<apex:variable var="f_apinvline" value="{!$ObjectType.rstkf__apinvline__c.fields}" />
<apex:variable var="f_apinvdist" value="{!$ObjectType.rstkf__apinvdist__c.fields}" />
<apex:variable var="f_customext" value="{!$ObjectType.rstkf__customextf__c.fields}" />
<apex:variable var="f_apinvh" value="{!$ObjectType.rstkf__apinvh__c.fields}" />
<apex:variable var="f_glacct" value="{!$ObjectType.rstkf__glacct__c.fields}" />

<script>
    function getInitialListCheck(flag) {
        if(flag) {
            var allOpenbatches = document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allOpenbatches_pbs:allOpenbatches').checked;       
            var closedBatches = document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:closedBatches_pbs:closedBatches').checked;
            var transferredbatches = document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:transferredbatches_pbs:transferredbatches').checked;
            var allbatchstatuses = document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allbatchstatuses_pbs:allbatchstatuses').checked;
            var frombatchnumber = document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:frombatchnumber_pbs:frombatchnumber').value;
            var throughbatchnumber = document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:throughbatchnumber_pbs:throughbatchnumber').value;
            
            if(!allOpenbatches && !closedBatches && !transferredbatches && !allbatchstatuses) {
                alert("{!$Label.Please_select_at_least_one_Batch_Status}");
                return false;
            }       
            
            if(allOpenbatches && (closedBatches || transferredbatches || allbatchstatuses)) {
            
                document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:closedBatches_pbs:closedBatches').checked = false;
                document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:transferredbatches_pbs:transferredbatches').checked = false;
                document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allbatchstatuses_pbs:allbatchstatuses').checked = false;            
                document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:frombatchnumber_pbs:frombatchnumber').value = '';
                document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:throughbatchnumber_pbs:throughbatchnumber').value = '';
                
            } else if((allOpenbatches || closedBatches || transferredbatches) && allbatchstatuses) {
            
                document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:closedBatches_pbs:closedBatches').checked = false;
                document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:transferredbatches_pbs:transferredbatches').checked = false;
                document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allOpenbatches_pbs:allOpenbatches').checked = false;
                if( (frombatchnumber == '' || frombatchnumber == null || frombatchnumber.trim() == '' || isNaN(frombatchnumber)) && (throughbatchnumber == '' || throughbatchnumber == null || throughbatchnumber.trim() == '' || isNaN(throughbatchnumber) )) {
                    alert("{!$Label.Please_enter_From_batch_number_Through_batch_number}"); 
                    return false;           
                }
            } else if(closedBatches || transferredbatches || allbatchstatuses) {
                if( (frombatchnumber == '' || frombatchnumber == null || frombatchnumber.trim() == '' || isNaN(frombatchnumber)) && (throughbatchnumber == '' || throughbatchnumber == null || throughbatchnumber.trim() == '' || isNaN(throughbatchnumber) )) {
                    alert("{!$Label.Please_enter_From_batch_number_Through_batch_number}");  
                    return false;           
                }
            }
            
            if(apinvhArray != ''){
                var apinvhArrayLength = apinvhArray.length;
                for (var i=1; i< apinvhArrayLength; i++) {  
                    //console.log('defaultValue '+apinvhArray[i].selected.checked);
                    //console.log('apinvhbatchno '+apinvhArray[i].apinvhbatchno);
                    //console.log('selectedIndex '+apinvhArray[i].selectedIndex);
                                    
                    if ((apinvhArray[i].selected.checked == true)) {
                        apinvhArray[i].selected.checked = false;
                    }
                }
            }
            
            getApinvhList();
                
        } else {
            var dateRangeOrVoucherNumber = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:dateRangeOrVoucherNumber_pbs:dateRangeOrVoucherNumber').value;
            var specifyvendor = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:specifyvendor_pbs:specifyvendor').checked;
            
            if(dateRangeOrVoucherNumber == "{!$Label.Date_Range}") {
                var fromDate = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromDate_pbs:fromDate').value;
                var throughDate = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughDate_pbs:throughDate').value;
                
                if( (fromDate == '' || fromDate == null || fromDate.trim() == '') && (throughDate == '' || throughDate == null || throughDate.trim() == '')) {
                    alert("{!$Label.Please_enter_From_Date_Through_Date}"); 
                    return false;           
                }
                
            } else if(dateRangeOrVoucherNumber == "{!$Label.Voucher_Number}") {
                var fromTransactionID = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromTransactionID_pbs:fromTransactionID').value;
                var throughTransactionID = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughTransactionID_pbs:throughTransactionID').value;
                
                if( (fromTransactionID == '' || fromTransactionID == null || fromTransactionID.trim() == '' || isNaN(fromTransactionID)) && (throughTransactionID == '' || throughTransactionID == null || throughTransactionID.trim() == '' || isNaN(throughTransactionID) )) {
                    alert("{!$Label.Please_enter_From_Transaction_ID_Through_Transaction_ID}"); 
                    return false;           
                }
            } else {
                alert("{!$Label.Please_select_Date_Range_Or_Voucher_Number}"); 
                document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:dateRangeOrVoucherNumber_pbs:dateRangeOrVoucherNumber').focus();
                return false;
            }
            
            if(specifyvendor) {
                var fromVendorcode = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromVendorcode_pbs:fromVendorcode').value;
                var throughVendorcode = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughVendorcode_pbs:throughVendorcode').value;
                if( (fromVendorcode == '' || fromVendorcode == null || fromVendorcode.trim() == '') && (throughVendorcode == '' || throughVendorcode == null || throughVendorcode.trim() == '')) {
                    alert("{!$Label.Please_enter_From_Vendor_Code_Through_Vendor_Code}");  
                    return false;           
                }
            }
            
            var apinvtxnArrayLength = apinvtxnArray.length;
            for (var i=0; i< apinvtxnArrayLength; i++) {    
                //console.log('defaultValue '+apinvtxnArray[i].selected.checked);
                //console.log('selectedIndex '+apinvtxnArray[i].selectedIndex);
                                
                if ((apinvtxnArray[i].selected.checked == true)) {
                    apinvtxnArray[i].selected.checked = false;
                }
            }
            
            getApinvtxnList('apcntl_false');            
        }
    }
    
    
    function checkvalidateApinhvh(buttoncounter,checked) {
        //console.log('Inside checkvalidate checked '+checked+' buttoncounter '+buttoncounter);
        if(checked == true){
            var apinvhArrayLength = apinvhArray.length;
            for (var i=0; i< apinvhArrayLength; i++) {  
                //console.log('defaultValue '+apinvhArray[i].selected.checked);
                //console.log('selectedIndex '+apinvhArray[i].selectedIndex);
                                
                if ((buttoncounter != i) && (apinvhArray[i].selected.checked == true)) {
                    apinvhArray[i].selected.checked = false;
                }
            }
            getApinvtxnList(buttoncounter);
        }   
        
        if(checked == false){
            var selectedCounter = 0;
            var apinvhArrayLength = apinvhArray.length;
            for (var i=0; i< apinvhArrayLength; i++) {  
                //console.log('defaultValue '+apinvhArray[i].selected.checked);
                //console.log('selectedIndex '+apinvhArray[i].selectedIndex);
                                
                if ((apinvhArray[i].selected.checked == true)) {
                    selectedCounter++;
                }
            }
            if(selectedCounter == 0) {
                getEmptyApinvtxnList();
            }           
        }
    }
    
    function checkvalidateApinvtxn(buttoncounter,checked) {
        //console.log('Inside checkvalidate checked '+checked+' buttoncounter '+buttoncounter);
                
        if(checked == true){
            var apinvtxnArrayLength = apinvtxnArray.length;
            for (var i=0; i< apinvtxnArrayLength; i++) {    
                //console.log('defaultValue '+apinvtxnArray[i].selected.checked);
                //console.log('selectedIndex '+apinvtxnArray[i].selectedIndex);
                                
                if ((buttoncounter != i) && (apinvtxnArray[i].selected.checked == true)) {
                    apinvtxnArray[i].selected.checked = false;
                }
            }
            getApinvlineList(buttoncounter);
        }   
        
        if(checked == false){
            var selectedCounter = 0;
            var apinvtxnArrayLength = apinvtxnArray.length;
            for (var i=0; i< apinvtxnArrayLength; i++) {    
                //console.log('defaultValue '+apinvtxnArray[i].selected.checked);
                //console.log('selectedIndex '+apinvtxnArray[i].selectedIndex);
                                
                if ((apinvtxnArray[i].selected.checked == true)) {
                    selectedCounter++;
                }
            }
            if(selectedCounter == 0) {
                getEmptyApinvlineList();
            }           
        }
        
    }
    
    function checkvalidateApinvline(buttoncounter,checked) {
        //console.log('Inside checkvalidate checked '+checked+' buttoncounter '+buttoncounter);
        if(checked == true){
            getApinvdistList(buttoncounter);
        }
        
        if(checked == true){
            var apinvlineArrayLength = apinvlineArray.length;
            for (var i=0; i< apinvlineArrayLength; i++) {   
                //console.log('defaultValue '+apinvlineArray[i].selected.checked);
                //console.log('selectedIndex '+apinvlineArray[i].selectedIndex);
                                
                if ((buttoncounter != i) && (apinvlineArray[i].selected.checked == true)) {
                    apinvlineArray[i].selected.checked = false;
                }
            }
            getApinvdistList(buttoncounter);
        }   
        
        if(checked == false){
            var selectedCounter = 0;
            var apinvlineArrayLength = apinvlineArray.length;
            for (var i=0; i< apinvlineArrayLength; i++) {   
                //console.log('defaultValue '+apinvlineArray[i].selected.checked);
                //console.log('selectedIndex '+apinvlineArray[i].selectedIndex);
                                
                if ((apinvlineArray[i].selected.checked == true)) {
                    selectedCounter++;
                }
            }
            if(selectedCounter == 0) {
                getEmptyApinvdistList();
            }           
        }   
    }
    
    function dateRangeOrVoucherNumberCheck() {
        var dateRangeOrVoucherNumber = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:dateRangeOrVoucherNumber_pbs:dateRangeOrVoucherNumber').value;
        //console.log(' dateRangeOrVoucherNumber : '+dateRangeOrVoucherNumber)
        if(dateRangeOrVoucherNumber == "{!$Label.Date_Range}") {
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromDate_pbs:fromDate').disabled=false;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughDate_pbs:throughDate').disabled=false;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromTransactionID_pbs:fromTransactionID').value='';           
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromTransactionID_pbs:fromTransactionID').disabled=true;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughTransactionID_pbs:throughTransactionID').value='';     
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughTransactionID_pbs:throughTransactionID').disabled=true;
        } else if(dateRangeOrVoucherNumber == "{!$Label.Voucher_Number}") {
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromDate_pbs:fromDate').value='';
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughDate_pbs:throughDate').value='';
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromDate_pbs:fromDate').disabled=true;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughDate_pbs:throughDate').disabled=true;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromTransactionID_pbs:fromTransactionID').disabled=false;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughTransactionID_pbs:throughTransactionID').disabled=false;
        } else {
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromDate_pbs:fromDate').value='';
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughDate_pbs:throughDate').value='';
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromTransactionID_pbs:fromTransactionID').value='';
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughTransactionID_pbs:throughTransactionID').value='';
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromDate_pbs:fromDate').disabled=true;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughDate_pbs:throughDate').disabled=true;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromTransactionID_pbs:fromTransactionID').disabled=true;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughTransactionID_pbs:throughTransactionID').disabled=true;
        }
    }
    
    function pageInit(){
        var fromVendorCodeCheck = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromVendorcode_pbs:fromVendorcode');
        if(fromVendorCodeCheck != null) {
             document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromVendorcode_pbs:fromVendorcode').disabled=true;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughVendorcode_pbs:throughVendorcode').disabled=true;
        }
    }
    
    function specifyvendorCheck() {
        var specifyvendor = document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:specifyvendor_pbs:specifyvendor').checked;
        
        if(specifyvendor) {
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromVendorcode_pbs:fromVendorcode').disabled=false;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughVendorcode_pbs:throughVendorcode').disabled=false;
        } else {
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromVendorcode_pbs:fromVendorcode').value='';
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughVendorcode_pbs:throughVendorcode').value='';
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:fromVendorcode_pbs:fromVendorcode').disabled=true;
            document.getElementById('pg:fm:apcntlApBatchOptFalse_pb:apcntlApBatchOptFalse_pb_edit:throughVendorcode_pbs:throughVendorcode').disabled=true;
        }
    
    }
    
    function mutualExclusiveCheckboxes(checkSeq){
        if(checkSeq == 1){
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:closedBatches_pbs:closedBatches').checked = false;
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:transferredbatches_pbs:transferredbatches').checked = false;
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allbatchstatuses_pbs:allbatchstatuses').checked = false;
        }
        
        if(checkSeq == 2){
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allOpenbatches_pbs:allOpenbatches').checked = false;        
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:transferredbatches_pbs:transferredbatches').checked = false;
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allbatchstatuses_pbs:allbatchstatuses').checked = false;
        }
        
        if(checkSeq == 3){
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allOpenbatches_pbs:allOpenbatches').checked = false;        
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:closedBatches_pbs:closedBatches').checked = false;
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allbatchstatuses_pbs:allbatchstatuses').checked = false;
        }
        
        if(checkSeq == 4){
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:allOpenbatches_pbs:allOpenbatches').checked = false;        
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:closedBatches_pbs:closedBatches').checked = false;
            document.getElementById('pg:fm:apcntlApBatchOptTrue_pb:apcntlApBatchOptTrue_pb_edit:transferredbatches_pbs:transferredbatches').checked = false;
        }
    }
</script>
<apex:sectionHeader title="{!$Label.rstkf__voucher_edit_list}" help="{!helpUrl}"/>    
<c:standardHeader cntr="{!controller}" title="{!$Label.rstkf__voucher_edit_list}" showHeader="false"/>
<apex:stylesheet value="{!$Resource.rstkf__ModalPopup_css}"/>
<apex:includeScript value="{!$Resource.rstkf__RowHandler_js}"/>
<apex:includeScript value="{!$Resource.rstkf__BlockUI}" />
<apex:form id="fm">
    <apex:actionFunction name="getApinvhList" action="{!getApinvhList}" reRender="zone_1_report,zone_2_report,zone_3_report,zone_4_report" immediate="false" status="pleaseWaitStatus"/>
    <apex:actionFunction name="getEmptyApinvtxnList" action="{!getEmptyApinvtxnList}" reRender="zone_2_report,zone_3_report,zone_4_report" immediate="false" status="pleaseWaitStatus"/>
    <apex:actionFunction name="getEmptyApinvlineList" action="{!getEmptyApinvlineList}" reRender="zone_3_report,zone_4_report" immediate="false" status="pleaseWaitStatus"/>
    <apex:actionFunction name="getEmptyApinvdistList" action="{!getEmptyApinvdistList}" reRender="zone_4_report" immediate="false" status="pleaseWaitStatus"/>
    <apex:actionFunction name="getApinvtxnList" action="{!getApinvtxnList}" reRender="zone_2_report,zone_3_report,zone_4_report" immediate="false" status="pleaseWaitStatus">
        <apex:param name="apinvSelected" assignTo="{!apinvSelected}" value=""/>
    </apex:actionFunction>
    <apex:actionFunction name="getApinvlineList" action="{!getApinvlineList}" reRender="zone_3_report,zone_4_report" immediate="false" status="pleaseWaitStatus">
        <apex:param name="apinvtxnSelected" assignTo="{!apinvtxnSelected}" value=""/>
    </apex:actionFunction>
    <apex:actionFunction name="getApinvdistList" action="{!getApinvdistList}" reRender="zone_4_report" immediate="false" status="pleaseWaitStatus">
        <apex:param name="apinvLineSelected" assignTo="{!apinvLineSelected}" value=""/>
    </apex:actionFunction>
    <apex:actionFunction name="generateReport" action="{!generateReport}" immediate="false" status="pleaseWaitStatus"/>
    <apex:actionStatus onstart="showTopDialog('pleaseWaitPopup');" onstop="closeTopDialog();" id="pleaseWaitStatus"/>       
    <apex:outputPanel id="apcntlApBatchOptTrue">
        <apex:pageBlock id="apcntlApBatchOptTrue_pb" mode="detail" rendered="{!apcntlApBatchOptions}">
            <apex:pageblocksection id="apcntlApBatchOptTrue_pb_edit" columns="1">
                <apex:outputField value="{!customext.rstkf__apvoucher_company__c}" />
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_openBatches__c.inlineHelpText}" id="allOpenbatches_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_openBatches__c.label}"/>
                    <apex:inputField id="allOpenbatches" value="{!customext.rstkf__apvoucher_openBatches__c}" onclick="mutualExclusiveCheckboxes(1);"/>                    
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_closedBatches__c.inlineHelpText}" id="closedBatches_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_closedBatches__c.label}"/>
                    <apex:inputField id="closedBatches" value="{!customext.rstkf__apvoucher_closedBatches__c}" onclick="mutualExclusiveCheckboxes(2);"/>                    
                </apex:pageBlockSectionItem>        
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_transferredBatches__c.inlineHelpText}" id="transferredbatches_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_transferredBatches__c.label}"/>
                    <apex:inputField id="transferredbatches" value="{!customext.rstkf__apvoucher_transferredBatches__c}" onclick="mutualExclusiveCheckboxes(3);"/>                    
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_allStatus__c.inlineHelpText}" id="allbatchstatuses_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_allStatus__c.label}"/>
                    <apex:inputField id="allbatchstatuses" value="{!customext.rstkf__apvoucher_allStatus__c}" onclick="mutualExclusiveCheckboxes(4);"/>                    
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_fromBatchNo__c.inlineHelpText}" id="frombatchnumber_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_fromBatchNo__c.label}"/>
                    <apex:inputField id="frombatchnumber" value="{!customext.rstkf__apvoucher_fromBatchNo__c}"/>                    
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_throughBranchNo__c.inlineHelpText}" id="throughbatchnumber_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_throughBranchNo__c.label}"/>
                    <apex:inputField id="throughbatchnumber" value="{!customext.rstkf__apvoucher_throughBranchNo__c}"/>                   
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <input type="button" id="viewEntry" value="{!$Label.Show_Voucher_Edit_List}" class="btn" onclick="getInitialListCheck(true);"/>
                    <input type="button" id="exportEntry" value="{!$Label.ExporttoExcel}" class="btn" onclick="generateReport();"/>
                </apex:pageBlockSectionItem>
            </apex:pageblocksection>        
        </apex:pageBlock>
    </apex:outputPanel>
    
    <apex:outputPanel id="apcntlApBatchOptFalse">
        <apex:pageBlock id="apcntlApBatchOptFalse_pb" mode="detail" rendered="{!!apcntlApBatchOptions}">
            <apex:pageblocksection id="apcntlApBatchOptFalse_pb_edit" columns="1">
                <apex:outputField value="{!customext.rstkf__apvoucher_company__c}" />
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_dateOrVoucher__c.inlineHelpText}" id="dateRangeOrVoucherNumber_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_dateOrVoucher__c.label}"/>
                    <apex:selectList id="dateRangeOrVoucherNumber" value="{!customext.rstkf__apvoucher_dateOrVoucher__c}" size="1" onchange="dateRangeOrVoucherNumberCheck()"> 
                        <apex:selectOptions value="{!dateOrVoucherPickList}" /> 
                    </apex:selectList>                   
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_specifyVendor__c.inlineHelpText}" id="specifyvendor_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_specifyVendor__c.label}"/>
                    <apex:inputCheckbox id="specifyvendor" value="{!customext.rstkf__apvoucher_specifyVendor__c}" onchange="specifyvendorCheck()"/>                   
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_fromVendorCode__c.inlineHelpText}" id="fromVendorcode_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_fromVendorCode__c.label}"/>
                    <apex:inputText id="fromVendorcode" value="{!customext.rstkf__apvoucher_fromVendorCode__c}"/>                   
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_throughVendorCode__c.inlineHelpText}" id="throughVendorcode_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_throughVendorCode__c.label}"/>
                    <apex:inputText id="throughVendorcode" value="{!customext.rstkf__apvoucher_throughVendorCode__c}"/>                   
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_fromDate__c.inlineHelpText}" id="fromDate_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_fromDate__c.label}"/>
                    <apex:inputField value="{!customext.rstkf__apvoucher_fromDate__c}" id="fromDate"/>                 
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_throughDate__c.inlineHelpText}" id="throughDate_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_throughDate__c.label}"/>
                    <apex:inputField value="{!customext.rstkf__apvoucher_throughDate__c}" id="throughDate"/>                   
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_fromTransactionID__c.inlineHelpText}" id="fromTransactionID_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_fromTransactionID__c.label}"/>
                    <apex:inputText id="fromTransactionID" value="{!customext.rstkf__apvoucher_fromTransactionID__c}"/>                   
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__apvoucher_throughTransactionID__c.inlineHelpText}" id="throughTransactionID_pbs">
                    <apex:outputLabel value="{!f_customext.rstkf__apvoucher_throughTransactionID__c.label}"/>
                    <apex:inputText id="throughTransactionID" value="{!customext.rstkf__apvoucher_throughTransactionID__c}"/>                   
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <input type="button" id="viewEntry1" value="{!$Label.Show_Voucher_Edit_List}" class="btn" onclick="getInitialListCheck(false);"/>
                    <input type="button" id="exportEntry" value="{!$Label.ExporttoExcel}" class="btn" onclick="generateReport();"/>
                </apex:pageBlockSectionItem>
                
            </apex:pageblocksection>            
        </apex:pageBlock>
    </apex:outputPanel>
    
    <apex:outputPanel id="zone_1_report">   
        <apex:pageBlock id="zone_1_report_pb" title="{!$Label.rstkf__batches}" rendered="{!apcntlApBatchOptions}">
            <script>
                var apinvhArray = []; apinvhCounters = 0;  
                var apinvhBlockTable;
            </script>
            <apex:pageBlockTable id="zone1Data" value="{!payableBatchDataList}" var="d">
                <apex:column headerValue="{!$Label.rstkf__select}" style="width:50px"> 
                    <apex:inputCheckbox id="apinvhSelected" value="{!d.selected}" onclick="checkvalidateApinhvh('{!d.batchcounter}',this.checked);"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvh.rstkf__apinvh_batchno__c.label}">
                    <apex:outputLink id="apinvhbatchno" value="/{!d.batch.id}" target="_blank">{!d.batch.rstkf__apinvh_batchno__c}</apex:outputLink>
                </apex:column>
                      
                <apex:column headerValue="{!f_apinvh.rstkf__apinvh_year__c.label}">
                    <apex:outputField id="apinvhyear" value="{!d.batch.rstkf__apinvh_year__c}" />                  
                </apex:column>
                
                <apex:column headerValue="{!f_apinvh.rstkf__apinvh_period__c.label}">
                    <apex:outputText id="apinvhperiod" value="{!d.batch.rstkf__apinvh_period__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvh.rstkf__apinvh_status__c.label}">
                    <apex:outputText id="apinvhstatus" value="{!d.batch.rstkf__apinvh_status__c}"/>
                    <script>
                        apinvhArray[apinvhCounters] = {
                            'selected': document.getElementById('{!$Component.apinvhSelected}'),
                            'apinvhbatchno': document.getElementById('{!$Component.apinvhbatchno}'),                            
                            'selectedIndex' : apinvhCounters                
                        }                        
                        apinvhCounters++;
                        gljhsBlockTable = document.getElementById('{!$Component.zone1Data}');
                    </script>
                </apex:column>
            </apex:pageBlockTable>
        </apex:pageBlock>
        
        <apex:panelGrid columns="6" rendered="{!showPopUpGridPanel}">
              <apex:outputText > Page {!(setOfBatches.pageNumber)} of {!CEILING(noOfRecordsPopup / sizePopup)}  </apex:outputText>              
              <apex:commandLink status="fetchStatus" reRender="zone_1_report" value="<<" action="{!firstOfsetOfBatches}" title="{!$Label.rstkf__labelfirstpage}"/>
              <apex:commandLink status="fetchStatus" reRender="zone_1_report" value="Previous" action="{!previousOfsetOfBatches}" title="{!$Label.rstkf__labelpreviouspage}"/>
              <apex:commandLink status="fetchStatus" reRender="zone_1_report" value="Next" action="{!nextOfsetOfBatches}" title="{!$Label.rstkf__labelnextpage}"/>
              <apex:commandLink status="fetchStatus" reRender="zone_1_report" value=">>" action="{!lastOfsetOfBatches}" title="{!$Label.rstkf__labellastpage}"/>
              
              <apex:outputPanel style="color:#4AA02C;font-weight:bold">
              <apex:actionStatus id="fetchStatus" startText="Fetching..." stopText=""/>
              </apex:outputPanel>
        </apex:panelGrid>             
    </apex:outputPanel>
    <apex:outputPanel id="zone_2_report">   
        <apex:pageBlock id="zone_2_report_pb" title="{!$Label.rstkf__vouchers}">
            <script>
                var apinvtxnArray = []; apinvtxnCounters = 0;
                var apinvtxnBlockTable;
            </script>           
            <apex:pageBlockTable id="zone2Data" value="{!payableTransactionDataList}" var="t" align="right" style="{!IF(apcntlApBatchOptions,'width:95%','width:100%')}" title="Zone 2">
                <apex:column headerValue="{!$Label.rstkf__select}" style="width:50px">
                    <apex:inputCheckbox id="invtxnSelected" value="{!t.selected}" onclick="checkvalidateApinvtxn('{!t.batchcounter}',this.checked);"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvtxn.rstkf__apinvtxn_tranid__c.label}">
                    <apex:outputText id="invtxnTranID" value="{!t.apinvtxn.rstkf__apinvtxn_tranid__c}"/>
                </apex:column>
                      
                <apex:column headerValue="{!f_apinvtxn.rstkf__apinvtxn_trantype__c.label}">
                    <apex:outputField id="invtxnType" value="{!t.apinvtxn.rstkf__apinvtxn_trantype__c}" />                 
                </apex:column>
                
                <apex:column headerValue="{!f_apinvtxn.rstkf__apinvtxn_vendno__c.label}">
                    <apex:outputField id="invtxnVendor" value="{!t.apinvtxn.rstkf__apinvtxn_vendno__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvtxn.rstkf__apinvtxn_trandate__c.label}">
                    <apex:outputField id="invtxnDate" value="{!t.apinvtxn.rstkf__apinvtxn_trandate__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvtxn.rstkf__apinvtxn_agedate__c.label}">
                    <apex:outputField id="invtxnDuedate" value="{!t.apinvtxn.rstkf__apinvtxn_agedate__c}"/>
                </apex:column>
                      
                <apex:column headerValue="{!f_apinvtxn.rstkf__apinvtxn_terms__c.label}">
                    <apex:outputField id="invtxnTerms" value="{!t.apinvtxn.rstkf__apinvtxn_terms__c}" />                   
                </apex:column>
                
                <apex:column headerValue="{!f_apinvtxn.rstkf__apinvtxn_homeamt__c.label}">
                    <apex:outputField id="invtxnAmount" value="{!t.apinvtxn.rstkf__apinvtxn_homeamt__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvtxn.rstkf__apinvtxn_status__c.label}">
                    <apex:outputText id="invtxnStatus" value="{!t.apinvtxn.rstkf__apinvtxn_status__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_customext.rstkf__apvoucher_prepayind__c.label}">
                    <apex:outputText id="invtxnPrepaid" value="{!t.prepayind}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvh.rstkf__apinvh_year__c.label}" rendered="{!!apcntlApBatchOptions}">
                    <apex:outputField id="invtxnYear" value="{!t.apinvtxn.apinvtxn_apinvh__r.rstkf__apinvh_year__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvh.rstkf__apinvh_period__c.label}" rendered="{!!apcntlApBatchOptions}">
                    <apex:outputText id="invtxnPeriod" value="{!t.apinvtxn.apinvtxn_apinvh__r.rstkf__apinvh_period__c}"/>
                    <script>
                        apinvtxnArray[apinvtxnCounters] = {
                            'selected': document.getElementById('{!$Component.invtxnSelected}'),
                            'invtxnTranID': document.getElementById('{!$Component.invtxnTranID}'),                          
                            'selectedIndex' : apinvtxnCounters                
                        }                        
                        apinvtxnCounters++;
                        apinvtxnBlockTable = document.getElementById('{!$Component.zone2Data}');
                    </script>
                </apex:column>
            </apex:pageBlockTable>
        </apex:pageBlock>
        <apex:panelGrid columns="6" rendered="{!showTxnGridPanel}">
              <apex:outputText > Page {!(setOfTxnBatches.pageNumber)} of {!CEILING(noOfRecordsTxnPopup / sizePopup)}  </apex:outputText>
              
              <apex:commandLink status="fetchStatus1" reRender="zone_2_report" value="<<" action="{!firstOfsetOfTxnBatches}" title="{!$Label.rstkf__labelfirstpage}"/>
              <apex:commandLink status="fetchStatus1" reRender="zone_2_report" value="Previous" action="{!previousOfsetOfTxnBatches}" title="{!$Label.rstkf__labelpreviouspage}"/>
              <apex:commandLink status="fetchStatus1" reRender="zone_2_report" value="Next" action="{!nextOfsetOfTxnBatches}" title="{!$Label.rstkf__labelnextpage}"/>
              <apex:commandLink status="fetchStatus1" reRender="zone_2_report" value=">>" action="{!lastOfsetOfTxnBatches}" title="{!$Label.rstkf__labellastpage}"/>
              <apex:outputPanel style="color:#4AA02C;font-weight:bold">
              <apex:actionStatus id="fetchStatus1" startText="Fetching..." stopText=""/>
              </apex:outputPanel>
        </apex:panelGrid>                 
    </apex:outputPanel>
    <apex:outputPanel id="zone_3_report" >  
        <apex:pageBlock id="zone_3_report_pb" title="{!$Label.rstkf__lines}">
            <script>
                var apinvlineArray = []; apinvlineCounters = 0;  
                var apinvlineBlockTable;
            </script>
            <apex:pageBlockTable id="zone3Data" value="{!payablesLineDataList}" var="invline" align="right" style="{!IF(apcntlApBatchOptions,'width:90%','width:95%')}">
                <apex:column headerValue="{!$Label.rstkf__select}" style="width:50px">
                    <apex:inputCheckbox id="invlineSelected" value="{!invline.selected}" onclick="checkvalidateApinvline('{!invline.batchcounter}',this.checked);"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvline.rstkf__apinvline_seq__c.label}">
                    <apex:outputText id="invlineLine" value="{!invline.apinvline.rstkf__apinvline_seq__c}"/>
                </apex:column>
        
                <apex:column headerValue="{!f_apinvline.rstkf__apinvline_item__c.label}">
                    <apex:outputField id="invlineItem" value="{!invline.apinvline.rstkf__apinvline_item__c}" />                    
                </apex:column>
                
                <apex:column headerValue="{!f_apinvline.rstkf__apinvline_desc__c.label}">
                    <apex:outputField id="invlineDescription" value="{!invline.apinvline.rstkf__apinvline_desc__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_customext.rstkf__apvoucher_unitprice__c.label}">
                    <apex:outputText id="invlineUnitPrice" value="{!invline.unitPrice}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvline.rstkf__apinvline_quantity__c.label}">
                    <apex:outputField id="invlineQty" value="{!invline.apinvline.rstkf__apinvline_quantity__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvline.rstkf__apinvline_homeamt__c.label}">
                    <apex:outputField id="invlineAmountHomecurrency" value="{!invline.apinvline.rstkf__apinvline_homeamt__c}"/>
                    <script>
                        apinvlineArray[apinvlineCounters] = {
                            'selected': document.getElementById('{!$Component.invlineSelected}'),
                            'invlineLine': document.getElementById('{!$Component.invlineLine}'),                            
                            'selectedIndex' : apinvlineCounters                
                        }                        
                        apinvlineCounters++;
                        apinvlineBlockTable = document.getElementById('{!$Component.zone3Data}');
                    </script>
                </apex:column>
            </apex:pageBlockTable>
        </apex:pageBlock>                 
    </apex:outputPanel> 
    <apex:outputPanel id="zone_4_report" >  
        <apex:pageBlock id="zone_4_report_pb" title="{!$Label.rstkf__distributions}">
            <apex:pageBlockTable id="zone4Data" value="{!apinvdistList}" var="invdist" align="right" style="{!IF(apcntlApBatchOptions,'width:85%','width:90%')}">
                <apex:column headerValue="{!f_apinvdist.rstkf__apinvdist_seq__c.label}">
                    <apex:outputText id="invdistSeq" value="{!invdist.rstkf__apinvdist_seq__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_glacct.rstkf__glacct_acct__c.label}">
                    <apex:outputField id="invdistAccount" value="{!invdist.apinvdist_glacct__r.rstkf__glacct_acct__c}" />                  
                </apex:column>
                
                <apex:column headerValue="{!f_glacct.rstkf__glacct_desc__c.label}">
                    <apex:outputText id="invdistAccountTitle" value="{!invdist.apinvdist_glacct__r.rstkf__glacct_desc__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvdist.rstkf__apinvdist_drhomeamt__c.label}">
                    <apex:outputField id="invdistDebitAmount" value="{!invdist.rstkf__apinvdist_drhomeamt__c}"/>
                </apex:column>
                
                <apex:column headerValue="{!f_apinvdist.rstkf__apinvdist_crhomeamt__c.label}">
                    <apex:outputField id="invdistCreditAmount" value="{!invdist.rstkf__apinvdist_crhomeamt__c}"/>
                </apex:column>
            </apex:pageBlockTable>
        </apex:pageBlock>                 
    </apex:outputPanel>
    <div id="pleaseWaitPopup" style="display:none">
        <apex:outputPanel styleClass="topPopupBackground" layout="block"/>
        <apex:outputPanel styleClass="topPopup">
            <apex:image url="{!$Resource.rstkf__busy}"/>
        </apex:outputPanel>
    </div>
</apex:form>
<c:footerInclude cntr="{!controller}" hideNotesAndAttachments="true"/>
</apex:page>