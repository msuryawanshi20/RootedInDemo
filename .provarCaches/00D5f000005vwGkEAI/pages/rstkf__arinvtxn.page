<apex:page id="pg" standardController="rstkf__arinvtxn__c" extensions="rstkf.ControllerExtnARDrCrMemo,rstkf.RemoteQueryController" sideBar="false" showHeader="true" action="{!doBeforePageLoad}">
<apex:variable var="o" value="{!rstkf__arinvtxn__c}" /> 
<apex:variable var="f" value="{!$ObjectType.rstkf__arinvh__c.fields}" /> 
<apex:variable var="f_arinvtxn" value="{!$ObjectType.rstkf__arinvtxn__c.fields}" />
<apex:variable var="f_armemo" value="{!$ObjectType.rstkf__armemo__c.fields}" />
<apex:variable var="f_arinvdue" value="{!$ObjectType.rstkf__arinvdue__c.fields}" />
<apex:variable var="f_arinvdist" value="{!$ObjectType.rstkf__arinvdist__c.fields}" />
<apex:variable var="f_arapplic" value="{!$ObjectType.rstkf__arapplic__c.fields}" />
<apex:variable var="fdim" value="{!$ObjectType.rstk__dimvals__c.fields}" />
<apex:variable var="f_customext" value="{!$ObjectType.rstkf__customextf__c.fields}" />
<c:standardHeader cntr="{!controller}" displayListLink="true" showHeader="{!showsideBarFlag}" customInclude="{!$Resource.rstkf__arCrDrMemo_cli}" enableQuickMenu="{!showsideBarFlag}" enableAutoComplete="true" title="{!$Label.rstkf__receivable_transaction}"/>
<apex:stylesheet value="{!$Resource.rstkf__ModalPopup_css}"  />
<apex:includeScript value="{!$Resource.rstkf__RowHandler_js}" />
<apex:includeScript value="{!$Resource.rstkf__BlockUI}" />
<apex:includeScript value="{!$Resource.rstkf__jquerytoolsoverlay}" />
<apex:outputPanel rendered="{!!showsideBarFlag}">
    <apex:stylesheet value="{!$Resource.rstkf__PopupPageHeader_css}"  />
</apex:outputPanel>    
<script>
    var viewMode = "{!viewMode}";
    var isCreditMemo = "{!isCreditMemo}";
    var isDebitMemo = "{!isDebitMemo}";  
    var currentGlcmpId = "{!currentGlcmp.id}";
    var currentRecordId = "{!o.id}";    
    var creditMemoType = '{!creditMemoType}';
    var debitMemoType = '{!debitMemoType}';    
    var tempLateID = '{!tempLateID}';
    var oldmainAmt = "{!editARDrCrMemo.arinvdue.rstkf__arinvdue_maintamt__c}";
    var accountReceivable = '{!accountReceivable}';
    var arcntlID = '{!arcntlID}';       
    var oldwhatPct = "{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_whtpct__c}";
    var isRootDox ={!isRootDox};
    
    function getJSSocustDetails(glsocust){
        console.log('Inisde getJSSocustDetails glsocust '+glsocust);
        console.log('Inisde currentGlcmpId '+currentGlcmpId);
        Visualforce.remoting.Manager.invokeAction(  
          '{!$RemoteAction.ControllerExtnARDrCrMemo.getSocustDetails}', //NameSpace  
          glsocust,
          currentGlcmpId,
          function(result, event){
            if (event.status) {
                checkResult(result);
            } else if (event.type === 'exception') {
                alert("{!$Label.Exception}", event.message);
                  } else {
                alert("{!$Label.UnexpectedStatus}", event.message); 
              }
          }, {escape:false}
        );
    }
    
    function getApWhtPct(apwhtID){
        console.log('Inisde getApWhtPct apwhtID '+apwhtID);
        Visualforce.remoting.Manager.invokeAction(  
          '{!$RemoteAction.ControllerExtnARDrCrMemo.getApWhtPct}', //NameSpace  
          apwhtID,
          function(result, event){
            if (event.status) {
                checkApwhtPctResult(result);
            } else if (event.type === 'exception') {
                alert("{!$Label.Exception}", event.message);
                  } else {
                alert("{!$Label.UnexpectedStatus}", event.message); 
              }
          }, {escape:false}
        );
    }
    
    
    
    function getAccountDescription(glacct,titlefieldID){
        console.log(' glacct '+glacct);
        console.log(' titlefieldID '+titlefieldID);
        Visualforce.remoting.Manager.invokeAction(  
            '{!$RemoteAction.ControllerExtnARDrCrMemo.getAccountDescription}', //NameSpace  
            glacct,
            function(result, event){
                if (event.status) {
                    checkAccountDescriptionResult(result,titlefieldID);
                } else if (event.type === 'exception') {
                    alert("{!$Label.Exception}", event.message);
                } else {
                    alert("{!$Label.UnexpectedStatus}", event.message); 
                }
            }, {escape:false}
        );
    }
    
    function getExchangeRate(){
        fromCurrency = document.getElementById('pg:fm:memoEdit_pb:pb_edit:pb_edit_op_maintcurr:maintcurr').value;        
        toCurrency = document.getElementById('pg:fm:memoEdit_pb:pb_edit:pb_edit_op_maintcurr:homecurr').value;
        inDate = document.getElementById('pg:fm:memoEdit_pb:pb_edit:pb_edit_op_trandate:trandate').value;;    
        console.log(' syCmpid '+syCmpid);
        console.log(' fromCurrency '+fromCurrency);
        console.log(' toCurrency '+toCurrency);
        console.log(' inDate '+inDate);
        Visualforce.remoting.Manager.invokeAction(  
            '{!$RemoteAction.ControllerExtnARDrCrMemo.getExchangeRateList}', //NameSpace  
            syCmpid,
            fromCurrency,
            toCurrency,
            inDate,
            function(result, event){
                if (event.status) {
                    checkExchangeRate(result);
                } else if (event.type === 'exception') {
                    alert("{!$Label.Exception}", event.message);
                } else {
                    alert("{!$Label.UnexpectedStatus}", event.message); 
                }
            }, {escape:false}
        );
    }
    
    function postTestEntryCheck() {
        var testResultString = document.getElementById('pg:fm:testResultString').value;
        if(testResultString != ''){
            alert(testResultString);
        }
        document.getElementById('pg:fm:testResultString').value = '';
    }
    
    function postSaveEntryCheck() {
        var testResultString = document.getElementById('pg:fm:testResultString').value;
        if(testResultString != ''){
            alert(testResultString);
            document.getElementById('pg:fm:testResultString').value = '';
            unblockUI();
        } else {
            getARDrCrMemoList();
        }        
    }
    
    function postSaveOverrideRate() {
        var testResultString = document.getElementById('pg:fm:testResultString').value;
        if(testResultString != ''){
            alert(testResultString);
            document.getElementById('pg:fm:testResultString').value = '';
            unblockUI();
        } else {
            window.location.reload();
        }        
    }
    
    var syCmpid = "{!currentGlcmp.glcmp_cmpno__c}";
    var homeCurrency = "{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homecurr__c}";
        
    function checkBatchSelected() {
        var batches = document.getElementById('pg:fm:filterMemo:pb:fllterGlYear:filterbatchNo').value;
        if(batches != '') {
            document.getElementById('pg:fm:filterMemo:pb:filtertrantype:trantypes').value='';
            document.getElementById('pg:fm:filterMemo:pb:filtersocust:socust').value='';
            document.getElementById('pg:fm:filterMemo:pb:filterpoststatus:poststatus').value='';
            document.getElementById('pg:fm:filterMemo:pb:filtertrantype:trantypes').disabled=true;
            document.getElementById('pg:fm:filterMemo:pb:filtersocust:socust').disabled=true;
            document.getElementById('pg:fm:filterMemo:pb:filterpoststatus:poststatus').disabled=true;       
        } else {
            document.getElementById('pg:fm:filterMemo:pb:filtertrantype:trantypes').disabled=false;
            document.getElementById('pg:fm:filterMemo:pb:filtersocust:socust').disabled=false;
            document.getElementById('pg:fm:filterMemo:pb:filterpoststatus:poststatus').disabled=false;
        }
    }
    var createMode = "{!createMode}"; 
    var updateMode = "{!updateMode}";
    var multicurrency = "{!multicurrency}";
    var haveCreatedNewBatch = "{!haveCreatedNewBatch}";
    
    function refreshParent() {
        console.log(' Inside refreshParent');
        var testResultString = document.getElementById('pg:fm:testResultString').value;
        if(testResultString != ''){
            alert(testResultString);
            document.getElementById('pg:fm:testResultString').value = '';
            unblockUI();
        } else {
            window.parent.reloadMemos();      
        }
    }
    
    setSelectListRequired("syterms");
    setSelectListRequired("arnsocust");
    setSelectListRequired("trantype");
    setSelectListRequired("maintcurr");
    setSelectListRequired("drSideglacct");
    setSelectListRequired("drSideglacctupdateOffsetAcctMode");
    setSelectListRequired("crSideglacct");
    setSelectListRequired("crSideglacctupdateOffsetAcctMode");
    
    function openEmailTemplatewindow() {
        console.log('openEmailTemplatewindow emailtemplatedataId ',emailtemplatedataId);
        var selectedtempLateID = sfffGetFieldValue('selected_template__c');
        console.log('openEmailTemplatewindow selectedtempLateID ',selectedtempLateID);
        var url = '/apex/emailTemplateDetailPrint?id=' + emailtemplatedataId+'&t='+selectedtempLateID+'&delete=Yes';
        console.log('url is '+url);
        window.open(url, '', 'toolbar=0,resizeable=0');
    
    }
        
    function printMemoCheck() {
        console.log('printMemoCheck tempLateID ',tempLateID);
        /*
        if(tempLateID == '') {
            alert("{!$Label.Email_Template_is_not_specified_in_Accounts_Receivable_Control_of_Company}");
        } else {
            creatEmailtemplatedata();
        }*/
        sfffSetFieldValue('selected_template__c', tempLateID);
        
        jQuery(".btnSelectTemplate").click();
        return false;        
    }
    
    function newMemoCheck() {
        console.log(' newMemoCheck called ');
        newMemo();
    }   
    
    function editMemoCheck() {
        console.log(' editMemoCheck called ');
        editMemo();
    }
    
    function deleteARDrCrMemoCheck() {
        console.log(' deleteARDrCrMemoCheck called ');
        deleteARDrCrMemo();
    }    
</script>
    <style>
        .modal {
                background-color:#fff;
                display:none;
                width:800px;
                padding:15px;
                text-align:left;
                font-size:1em;
                border:2px solid #333;
            
                opacity:1.0;
                -moz-border-radius:6px;
                -webkit-border-radius:6px;
                -moz-box-shadow: 0 0 50px #ccc;
                -webkit-box-shadow: 0 0 50px #ccc;
            }
            
            .modal h2 {
                margin:0px;
                padding:10px 0 10px 45px;
                font-size:16px;
            }
            
            .modalComponents {
                color:#efefef;
                height:600px;
                width:900px;
                z-index:100;
            }
            
            /* container for external content. uses vertical scrollbar, if needed */
            .contentWrap {
              height:441px;
              overflow-y:auto;
              z-index:100;
            }
    
            .topFrame
            {
                z-index:20100;
            }
                        
            .largerLabel td { width:50% !important; }
            
        .modalPopup{
             background-color: white;
             border-style: solid;
             border-width: 3px;
             padding:1px;
             position: absolute;
             z-index: 10011;
             width: 650px;
             top:100px;
             overflow:auto;
         }
        .topPopup{
             background-color: transparent;
             border-style: none;
             position: absolute;
             z-index: 20001;
             width: 50px;
             top:100px;
         }
        .popupBackground{
             background-color:black;
             opacity: 0.20;
             position:absolute;
             width: 100%;
             height: 100%;
             top: 0;
             left: 0;
             z-index: 10010;
         }
        .topPopupBackground{
             background-color:green;
             opacity: 0.10;
             position:absolute;
             width: 100%;
             height: 100%;
             top: 0;
             left: 0;
             z-index: 20000;
         }
    
        
        .clsCenter{
            text-align:center;
        }
        
        input[type=checkbox][disabled]{
          opacity: 0.4;
        }
        .modalPopupX{
             z-index: 30011;
             width: 650px;
         }
        .popupBackgroundX{
             z-index: 30010;
        }
        .ct{
            text-align:center;
        }
        
        thePopup.offset({
            top  : topOffset + theWin.scrollTop(),
            left  : 40
        });
        
        .Processing
        {
            position: fixed;
            background: url({!$Resource.busy});
            background-repeat: no-repeat;
            background-position: center;
            width: 100%;
            height: 100%;
            z-index: 2004;
            left: 0%;
            top: 0%;
        }
        .ac_results {
            z-index: 9999;
            background-color: #eee;
        }
        
        .overlay {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 39999;
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%;
            text-align: center;
            background-color: rgba(0,0,0,0.4);
        }    
   </style>         
   <apex:form id="fm">          
        <apex:actionFunction name="addNewARDrCrMemo" action="{!addNewARDrCrMemo}" immediate="false" rerender="pageMessages,memoEdit,memoList" status="pleaseWaitStatus"/>
        <apex:actionFunction name="editARDrCrMemo" action="{!editARDrCrMemo}" rerender="pageMessages,memoEdit,memoList,testResultString" immediate="false" status="pleaseWaitStatus" oncomplete="postTestEntryCheck();">
            <apex:param name="selectedIndex" assignTo="{!selectedIndex}" value=""/>
            <apex:param name="editPart" assignTo="{!editPart}" value=""/>
        </apex:actionFunction>
        <apex:actionFunction name="showMemo" action="{!showMemoARDrCrMemo}" rerender="pageMessages,memoEdit,memoList,testResultString" immediate="false" status="pleaseWaitStatus" oncomplete="postTestEntryCheck();">
            <apex:param name="selectedIndex" assignTo="{!selectedIndex}" value=""/>
        </apex:actionFunction>
        <apex:actionFunction name="cancelAddOrEdit" action="{!cancelAddOrEdit}" immediate="false" status="pleaseWaitStatus" rerender="pageMessages,memoEdit,memoList"/>
        <apex:actionFunction name="getProjectsOfDiv" action="{!getProjectsOfDiv}" reRender="projectToSync" immediate="false" status="pleaseWaitStatus" />
        <apex:actionFunction name="saveARDrCrMemo" action="{!saveARDrCrMemo}" immediate="false" status="pleaseWaitStatus" rerender="pageMessages,testResultString" oncomplete="postSaveEntryCheck();" />
        <apex:actionFunction name="saveARDrCrMemoPopup" action="{!saveARDrCrMemo}" immediate="false" status="pleaseWaitStatus" rerender="pageMessages,testResultString" oncomplete="refreshParent();">
            <apex:param name="popupSave" assignTo="{!popupSave}" value=""/>
        </apex:actionFunction>  
        <apex:actionFunction name="postARDrCrMemo" action="{!postARDrCrMemo}" rerender="pageMessages,memoEdit,memoList,op_hdrbtns,gltxnLists,whtList" oncomplete="unblockUI();" immediate="false" status="pleaseWaitStatus"/>
        <apex:actionFunction name="deleteARDrCrMemo" action="{!deleteARDrCrMemo}" immediate="false" status="pleaseWaitStatus" />        
        <apex:actionFunction name="getARDrCrMemoList" action="{!getARDrCrMemoList}" immediate="false" rerender="pageMessages,memoEdit,memoList" status="pleaseWaitStatus"/>
        <apex:actionStatus onstart="showTopDialog('pleaseWaitPopup');" onstop="closeTopDialog();" id="pleaseWaitStatus"/>        
        <apex:actionFunction name="creatEmailtemplatedata" action="{!creatEmailtemplatedata}" immediate="false" status="pleaseWaitStatus" rerender="pageMessages,emailtemplatedataId,memoEdit" oncomplete="openEmailTemplatewindow()" />
        <apex:actionFunction name="newMemo" action="{!newMemo}" immediate="false" status="pleaseWaitStatus"/>
        <apex:actionFunction name="editMemo" action="{!editMemo}" immediate="false" status="pleaseWaitStatus"/>
        <apex:actionFunction name="changeDebitMemoAccountQueries" action="{!changeDebitMemoAccountQueries}" rerender="pageMessages,crSideglacct_op,drSideglacct_op" oncomplete="setupAutocomplete();assignDebitAcctDefaults();" immediate="false" status="pleaseWaitStatus"/>
        <apex:actionFunction name="changeCreditMemoAccountQueries" action="{!changeCreditMemoAccountQueries}" rerender="pageMessages,crSideglacct_op,drSideglacct_op" oncomplete="setupAutocomplete();assignCreditAcctDefaults();" immediate="false" status="pleaseWaitStatus"/>
        <apex:actionFunction name="showPaymentDetail" action="{!showPaymentDetail}" rerender="payment_pageMessages,arapplicList" oncomplete="unblockUI();openArapplicFramePopup();" immediate="false" status="pleaseWaitStatus"/> 
        <apex:actionFunction name="createWHTAdjustments" action="{!createWHTAdjustments}" rerender="pageMessages,memoEdit,memoList,op_hdrbtns,gltxnLists,whtList,arwhttxnLists" oncomplete="unblockUI();" immediate="false" status="pleaseWaitStatus" >
            <apex:param name="whtadjAmt" assignTo="{!customext.rstkf__arinvtxn_adjAmt__c}" value=""/>
        </apex:actionFunction>
        <apex:actionFunction name="saveWHTPopup" action="{!saveARDrCrMemo}" immediate="false" status="pleaseWaitStatus" rerender="pageMessages,testResultString" oncomplete="postSaveEntryCheck();">
            <apex:param name="whtSave" assignTo="{!whtSave}" value=""/>
        </apex:actionFunction>
        <apex:actionFunction name="exchrateScheduleChanged" action="{!exchrateScheduleChanged}" rerender="pageMessages,arinvtxn_override_schedule__c" immediate="false" status="pleaseWaitStatus" oncomplete="unblockPopupUI('pleaseWaitPopup');">
            <apex:param name="exchrate_schedule" assignTo="{!customext.rstkf__arinvtxn_exchrate_schedule__c}" value=""/>
        </apex:actionFunction>
        <apex:actionFunction name="saveOverrideRate" action="{!saveOverrideRate}" rerender="pageMessages" immediate="false" status="pleaseWaitStatus" oncomplete="postSaveOverrideRate();">
            <apex:param name="exchrate_schedule" assignTo="{!customext.rstkf__arinvtxn_exchrate_schedule__c}" value=""/>
            <apex:param name="override_schedule" assignTo="{!customext.rstkf__arinvtxn_override_schedule__c}" value=""/>
            <apex:param name="override_exchrate" assignTo="{!customext.rstkf__arinvtxn_override_exchrate__c}" value=""/>
            <apex:param name="isReverse" assignTo="{!isReverseExchRate}" value=""/>
        </apex:actionFunction>
        <apex:actionFunction name="unapplyCreditMemo" action="{!unapplyCreditMemo}" immediate="false" status="pleaseWaitStatus" rerender="pageMessages,testResultString" oncomplete="blockUI();postTestEntryCheck();">
            <apex:param name="unApplyARApplicId" assignTo="{!unApplyARApplicId}" value=""/>
        </apex:actionFunction>

        <apex:inputHidden id="testResultString" value="{!testResultString}" />
        <apex:outputPanel id="emailtemplatedataId">
            <script>
                var emailtemplatedataId = "{!emailtemplatedataId}";             
             </script>
        </apex:outputPanel>
        <apex:outputPanel id="memoEdit">
            <apex:inputHidden id="arinvtxn_glacct__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_glacct__c}" />
            <apex:inputHidden id="arnsocustcmpno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socustcmpno__c}" />
            <apex:inputHidden id="arcontrolacct" value="{!arcontrolacct}" />
            <apex:inputHidden id="arcontrolacctDesc" value="{!arcontrolacctDesc}" />
            
            <apex:pageBlock title="{!$Label.rstkf__receivable_transaction}" id="memoEdit_pb">
                <apex:pageBlockButtons >
                    <apex:outputPanel id="op_hdrbtns">
                        <apex:outputPanel id="op_hdrbtnsSave" rendered="{!AND(OR(createMode,updateMode),showsideBarFlag)}">
                            <input type="button" id="saveMemo" value="{!$Label.btn_save}" class="btn" onclick="saveMemoCheck();"/>                                                  
                        </apex:outputPanel>
                        <!--<apex:outputPanel id="op_hdrbtnsNew" rendered="{!AND(viewMode,showsideBarFlag)}">
                            <input type="button" id="newMemo" value="New Memo" class="btn" onclick="newMemoCheck();" />      
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsEdit" rendered="{!AND(viewMode,showsideBarFlag)}">
                            <input type="button" id="editMemo" value="Edit Memo" class="btn" onclick="editMemoCheck();" />      
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsDelete" rendered="{!If(AND(viewMode,showsideBarFlag,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == unpostedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == pendingStatus)),true,false)}">                      
                            <input type="button" id="deleteMemo" value="Delete Memo" class="btn" onclick="deleteARDrCrMemoCheck();"/>
                        </apex:outputPanel>-->
                        <apex:outputPanel id="op_hdrbtnsView" rendered="{!AND(viewMode,OR(editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == creditMemoType,editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == debitMemoType))}">
                             <input type="button" id="printMemo" value="{!$Label.Print_Memo}" class="btn" onclick="printMemoCheck();"/>                            
                        </apex:outputPanel>
                        <!--apex:outputPanel rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == invoiceType }" style="position:auto;text-align:center"-->
                        <apex:outputPanel rendered="{!OR(viewMode,updateMode)}" style="position:auto;text-align:center">    
                            <input type="button" id="ShowArinvdist" value="{!$Label.Show_Receivable_Transaction_Distributions}" class="btn" onclick="openDistFramePopup();"/>
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!AND(viewMode,editARDrCrMemo.arinvtxn.arinvtxn_socustcmpno__r.rstkf__socustcmpno_apwht__c != null, editARDrCrMemo.arinvtxn.rstkf__arinvtxn_whtadjtxn__c != true)}" style="position:auto;text-align:center">
                            <input type="button" id="ShowWHT" value="{!$Label.WHT_Detail}" class="btn" onclick="openWHTFramePopup();"/>
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsPost" rendered="{!If(AND(viewMode,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_numbtxns__c == 1,arcntlApBatchOptions == false, editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != postedStatus),true,false)}">                     
                            <input type="button" id="postMemo" value="{!$Label.Post_Memo}" class="btn" onclick="blockUI();postARDrCrMemo();"/>
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsDelete" rendered="{!If(AND(viewMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == unpostedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == pendingStatus), showsideBarFlag, !arcntlPreventMemoDeletion),true,false)}">                      
                            <input type="button" id="deleteMemo" value="{!$Label.Delete_Memo}" class="btn" onclick="deleteMemoCheck();"/>
                        </apex:outputPanel>   
                        <apex:outputPanel style="position:auto;text-align:center">
                            <input type="button" id="ShowArapplic" value="{!$Label.Show_Payment_Application_Details}" class="btn" onclick="doShowPaymentDetail();"/>
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsOverrideExchangeRate" rendered="{!If(AND(viewMode,currentGlcmp.rstkf__glcmp_manfxoverok__c == true,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != postedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != closedStatus),true,false)}">                      
                            <input type="button" id="overrideexchangerate" value="{!$Label.rstkf__override_exchange_rate}" class="btn" onclick="showOverrideexchratePopup();"/>
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsCancel" rendered="{!If(AND(!viewMode,showsideBarFlag),true,false)}">
                            <input type="button" id="cancelMemo" value="{!$Label.btn_cancel}" class="btn" onclick="cancelAddOrEdit();" />      
                        </apex:outputPanel>
                        
                        <apex:outputPanel id="op_hdrbtnsSavePopup" rendered="{!AND(OR(createMode,updateMode),!showsideBarFlag)}">
                            <input type="button" id="saveMemoPopup" value="{!$Label.Save_And_Close}" class="btn" onclick="saveMemoPopupCheck();"/>
                        </apex:outputPanel>                         
                        <!--
                        <apex:outputPanel id="op_hdrbtnsEdit" rendered="{!If(AND(viewMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Unbatched Postings Pending',editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Pending'),OR(editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == creditMemoType,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == debitMemoType)),true,false)}">
                            <input type="button" id="editBody" value="Edit Body" class="btn" onclick="editBodyMemoCheck();"/>
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsEditOffAcct" rendered="{!If(AND(viewMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Unbatched Postings Pending',editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Pending'),OR(editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == creditMemoType,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == debitMemoType),editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_batchsource__c == 'A/R Memo Entry'),true,false)}">   
                            <input type="button" id="editOffsetAccount" value="Edit Offset Account" class="btn" onclick="editOffsetAccountCheck();"/>
                        </apex:outputPanel> 
                        <apex:outputPanel id="op_hdrbtnsDelete" rendered="{!If(AND(viewMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Unbatched Postings Pending',editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Pending')),true,false)}">                      
                            <input type="button" id="deleteMemo" value="Delete Memo" class="btn" onclick="deleteMemoCheck();"/>
                        </apex:outputPanel>   
                         -->                                      
                    </apex:outputPanel>
                </apex:pageBlockButtons>
                
                <apex:pageblocksection id="pb_edit" columns="2"> 
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_arinvh__c.inlineHelpText}" id="pb_edit_op_arinvh" rendered="{!AND(showHeaderFlag, OR(updateMode,viewMode,AND(createMode,arcntlApBatchOptions)))}">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_arinvh__c.label}"/>
                        <apex:outputPanel >                         
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_arinvh__c}" rendered="{!OR(updateMode,viewMode)}"/>
                            <apex:selectList id="arinvh" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_arinvh__c}" rendered="{!AND(createMode,arcntlApBatchOptions)}" size="1">
                                <apex:selectOptions value="{!arinvhs}" /> 
                            </apex:selectList>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>                    
                    <apex:pageBlockSectionItem rendered="{!AND(showHeaderFlag, OR(updateMode,viewMode,AND(createMode,arcntlApBatchOptions)))}">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_session_status__c.label}" />
                        <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_session_status__c}" />
                    </apex:pageBlockSectionItem>                        
                                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_tranid__c.inlineHelpText}" id="pb_edit_op_tranid">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_tranid__c.label}"/>
                        <apex:outputPanel >                         
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_tranid__c}" rendered="{!OR(updateMode,viewMode)}"/>
                            <apex:outputText id="pending_id" value="{!$Label.rstkf__arinvtxn_pending}" rendered="{!createMode}"/>                         
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_billto__c.inlineHelpText}" id="pb_edit_op_billto">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_billto__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="billto" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_billto__c}" rendered="{!OR(AND(updateMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == unpostedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == pendingStatus)))}" size="1" >
                                <apex:selectOptions value="{!CustomerAddress}" /> 
                            </apex:selectList>                            
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_billto__c}" rendered="{!OR(createMode,viewMode,AND(updateMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == closedStatus)))}"/>                                                        
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>                    
                    <!--  apex:pageBlockSectionItem -->
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_socust__c.inlineHelpText}" id="pb_edit_op_socust">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_socust__c.label}"/>
                        <apex:outputPanel >
                            <!--apex:selectList id="arnsocust" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socust__c}" rendered="{!createMode}" size="1" onchange="socustChanged()">
                                <apex:selectOptions value="{!customers}" /> 
                            </apex:selectList> 
                            <c:autocomplete ref="arinvtxn_socust__c" id="arinvtxn_socust__c" cntr="{!controller}" query="select id,name from rstk__socust__c" tabIndex="1" required="true" rendered="{!createMode}" onchange="socustChanged()"/-->
                            <apex:outputPanel styleClass="requiredInput" layout="block" rendered="{!createMode}" >
                                <apex:outputPanel styleClass="requiredBlock" layout="block" />
                                <apex:inputText id="arinvtxn_socust__c_autocomplete" styleClass="ac_input" size="30" />
                                <apex:inputText id="arinvtxn_socust__c" onchange="socustChanged();" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socust__c}" style="display:none" />
                                <script>autocompleteParms["{!$Component.arinvtxn_socust__c}"] = {query:"select id, name from rstk__socust__c ", queryParms:[], codeColumn:"id", descColumn:"Name"};</script>
                            </apex:outputPanel>    
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socust__c}" rendered="{!OR(AND(!createMode),updateMode,viewMode)}"/>                                                        
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_gldiv__c.inlineHelpText}" id="pb_edit_op_gldiv">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_gldiv__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="arinvtxn_gldiv__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_gldiv__c}" rendered="{!OR(createMode,updateMode )}" size="1" onchange="ardivChanged();">
                                <apex:selectOptions value="{!gldivs}" />
                            </apex:selectList>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_gldiv__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_trantype__c.inlineHelpText}" id="pb_edit_op_trantype">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_trantype__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="trantype" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c}" size="1" rendered="{!createMode}" onchange="trantypeChanged('','false','');"> 
                                <apex:selectOptions value="{!txntype}" /> 
                            </apex:selectList>
                            <!--<apex:inputField id="trantype" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c}" rendered="{!createMode}" onchange="trantypeChanged('','false','');"/>-->
                            <apex:outputField id="trantypeOptxt" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c}" rendered="{!OR(updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_glproj__c.inlineHelpText}" id="pb_edit_op_glproj">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_glproj__c.label}"/>
                        <apex:outputPanel id="projectToSync">
                            <!--
                            <apex:selectList id="arinvtxn_glproj__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_glproj__c}" rendered="{!OR(createMode,updateMode )}" size="1">
                                <apex:selectOptions value="{!projects}" /> 
                            </apex:selectList> -->
                            <apex:inputText id="arinvtxn_glproj__c_autocomplete" styleClass="ac_input" size="30" rendered="{!OR(createMode,updateMode)}" value="{!projectName}" />
                            <apex:inputText id="arinvtxn_glproj__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_glproj__c}" style="display:none" />
                            <script>autocompleteParms["{!$Component.arinvtxn_glproj__c}"] = {query:"Select Id, Name from glproj__c where glproj_gldiv__c = 'prm'", queryParms:[['arinvtxn_gldiv__c','Division']], codeColumn:"id", descColumn:"Name"};</script>    
                                
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_glproj__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_docno__c.inlineHelpText}" id="pb_edit_op_docno">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_docno__c.label}"/>
                        <apex:outputPanel >
                            <!--  <apex:inputField id="docno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_docno__c}" onchange="arinvtxnDocnoChanged()"/> -->                            
                            <apex:inputField id="docno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_docno__c}" rendered="{!createMode}" onchange="arinvtxnDocnoChanged()"/>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_docno__c}" rendered="{!OR(updateMode,viewMode)}"/>                            
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval1__c.inlineHelpText}" id="pb_edit_op_dimval1">
                        <apex:outputLabel value="{!fdim.rstk__dimval1__c.label}"/>
                        <apex:outputPanel >
                                <span id="modalstatic_dimvals_dimval1__c"></span>
                                <apex:selectlist id="modal_dimvals_dimval1__c" value="{!dimvalrecord.rstk__dimval1__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                        <apex:selectOptions value="{!dimValsOptions1}"/>
                                </apex:selectlist>
                                <apex:outputField value="{!dimvalrecord.rstk__dimval1__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_trandate__c.inlineHelpText}" id="pb_edit_op_trandate">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_trandate__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="trandate" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trandate__c}" rendered="{!AND(createMode,!haveCreatedNewBatch)}" onchange="getExchangeRate()" />
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trandate__c}" rendered="{!OR(updateMode,viewMode)}"/>
                            <apex:outputText value="{!newBatchTranDate}" rendered="{!AND(createMode,haveCreatedNewBatch)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval2__c.inlineHelpText}" id="pb_edit_op_dimval2">
                        <apex:outputLabel value="{!fdim.rstk__dimval2__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval2__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval2__c" value="{!dimvalrecord.rstk__dimval2__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions2}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval2__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                   
                    <apex:pageBlockSectionItem helpText="{!f_arinvdue.rstkf__arinvdue_maintamt__c.inlineHelpText}" id="pb_edit_op_maintamt">
                        <apex:outputLabel value="{!f_arinvdue.rstkf__arinvdue_maintamt__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="maintamt" value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_maintamt__c}" rendered="{!OR(createMode,updateMode )}" onchange="mainAmtChanged()"/>
                            <apex:outputField value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_maintamt__c}" rendered="{!viewMode}"/> 
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval3__c.inlineHelpText}" id="pb_edit_op_dimval3">
                        <apex:outputLabel value="{!fdim.rstk__dimval3__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval3__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval3__c" value="{!dimvalrecord.rstk__dimval3__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                <apex:selectOptions value="{!dimValsOptions3}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval3__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!OR(viewMode,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == invoiceType) }" />
                    <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__arinvdist_debitAcct__c.inlineHelpText}" id="pb_edit_pbs_drSideglacct" rendered="{!AND(!viewMode,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c != invoiceType) }">
                        <apex:outputLabel value="{!f_customext.rstkf__arinvdist_debitAcct__c.label}"/>
                        <apex:outputPanel id="drSideglacct_op">
                            <!-- apex:selectList id="drSideglacct" value="{!editARDrCrMemo.drSide.arinvdist_glacct__c}" rendered="{!OR(createMode,updateOffsetAcctMode)}" size="1"-->
                            <!--<apex:selectList id="drSideglacct_dup" value="{!editARDrCrMemo.drSide.arinvdist_glacct__c}" rendered="{!createMode}" size="1" onchange="getAccountDescription(this.value,'drSideglacct');">
                                <apex:selectOptions value="{!accts}" /> 
                            </apex:selectList>  {!accts.size <= 999} 
                            
                            <apex:selectList id="drSideglacctupdateOffsetAcctMode" value="{!editARDrCrMemo.drSide.arinvdist_glacct__c}" rendered="{!AND(updateMode,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == creditMemoType)}" size="1" onchange="getAccountDescription(this.value,'drSideglacct');">
                                <apex:selectOptions value="{!NonARAccts}" /> 
                            </apex:selectList>-->
                            <!--
                            <c:glaccount id="arinvdist_glacct2__c" 
                               cntr="{!controller}"
                               ref="arinvdist_glacct__c"
                               objKey="editARDrCrMemodrSide"          
                               options="{!accts}"
                               slDesc="{!drglacctName}"
                               query="{!glacctAutoCompleteQuery}" 
                               queryParms="[]"
                               displaySelectList="false"
                               required="true"
                               rendered="{!createMode}"
                               width="300px"
                               tabIndex="10" /> -->
                            <!-- 
                            <apex:inputText id="arinvdist_glacct__c_autocomplete" styleClass="ac_input" size="30" rendered="{!createMode}" value="{!drglacctName}" />
                            <apex:inputText id="arinvdist_glacct__c" value="{!editARDrCrMemo.drSide.arinvdist_glacct__c}" style="display:none" />
                            <script>autocompleteParms["{!$Component.arinvdist_glacct__c}"] = {query:"Select Id, Name from glacct__c ", queryParms:[], codeColumn:"id", descColumn:"Name"};</script>
                            -->
                            
                            <c:autocomplete id="drSideglacct" ref="arinvdist_glacct__c" cntr="{!controller}" required="false" slDesc="{!drglacctName}" objKey="editARDrCrMemodrSide" 
                                    query="{!drGlacctAutoCompleteQuery}" queryParms="[]" eldisabled="{!AND(updateMode,editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == debitMemoType)}"/>
                            <!--            
                            <apex:outputField value="{!editARDrCrMemo.drSide.arinvdist_glacct__c}" rendered="{!OR(AND(updateMode,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == debitMemoType),viewMode)}" id="pb_edit_op_drSideglacct"/>
                            -->    
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>                    
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval4__c.inlineHelpText}" id="pb_edit_op_dimval4">
                        <apex:outputLabel value="{!fdim.rstk__dimval4__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval4__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval4__c" value="{!dimvalrecord.rstk__dimval4__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions4}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval4__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!OR(viewMode,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == invoiceType) }" />
                    <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__arinvdist_creditAcct__c.inlineHelpText}" id="pb_edit_pbs_crSideglacct" rendered="{!AND(!viewMode,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c != invoiceType) }">
                        <apex:outputLabel value="{!f_customext.rstkf__arinvdist_creditAcct__c.label}"/>
                        <apex:outputPanel id="crSideglacct_op">
                            <!--  apex:selectList id="crSideglacct" value="{!editARDrCrMemo.crSide.arinvdist_glacct__c}"  rendered="{!OR(createMode,updateOffsetAcctMode)}" size="1" disabled="true"-->
                            <!--<apex:selectList id="crSideglacct" value="{!editARDrCrMemo.crSide.arinvdist_glacct__c}"  rendered="{!createMode}" size="1" onchange="getAccountDescription(this.value,'crSideglacct');">
                                <apex:selectOptions value="{!accts}" /> 
                            </apex:selectList>
                            
                            <c:glaccount id="crSideglacct" 
                               cntr="{!controller}"
                               ref="arinvdist_glacct__c"
                               objKey="editARDrCrMemocrSide"          
                               options="{!accts}"
                               slDesc="{!glacctName}"
                               query="{!glacctAutoCompleteQuery}" 
                               queryParms="[]"
                               displaySelectList="false"
                               required="true"
                               rendered="{!createMode}"
                               autocompleteController="ControllerExtnARDrCrMemo"
                               onchange="getAccountDescription(this.value,'crSideglacct');"
                               width="300px"
                               tabIndex="10" /> -->
                            
                            <c:autocomplete id="crSideglacct" ref="arinvdist_glacct__c" cntr="{!controller}" required="false" slDesc="{!crglacctName}" objKey="editARDrCrMemocrSide"
                                    query="{!crGlacctAutoCompleteQuery}" queryParms="[]"/>
                            <!--            
                            <apex:selectList id="crSideglacctupdateOffsetAcctMode" value="{!editARDrCrMemo.crSide.arinvdist_glacct__c}"  rendered="{!AND(updateMode,editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == debitMemoType)}" size="1" onchange="getAccountDescription(this.value,'crSideglacct');">
                                <apex:selectOptions value="{!NonARAccts}" /> 
                            </apex:selectList>
                            
                            <apex:outputField value="{!editARDrCrMemo.crSide.arinvdist_glacct__c}" rendered="{!OR(AND(updateMode,editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == creditMemoType),viewMode)}" id="pb_edit_op_crSideglacct"/>
                            -->    
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval5__c.inlineHelpText}" id="pb_edit_op_dimval5">
                        <apex:outputLabel value="{!fdim.rstk__dimval5__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval5__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval5__c" value="{!dimvalrecord.rstk__dimval5__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions5}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval5__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                   <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_sotax__c.inlineHelpText}" id="pb_edit_op_sotax">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_sotax__c.label}"/>
                        <apex:outputPanel id="pb_edit_op_inner_sotax">                            
                            <apex:inputText id="arinvtxn_sotax__c_autocomplete" styleClass="ac_input" size="30" rendered="{!OR(createMode,AND(updateMode, OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == unpostedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == pendingStatus)))}" value="{!sotaxName}" />
                            <apex:inputText id="arinvtxn_sotax__c" onchange="sotaxOrVatClassChanged('sotax');" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_sotax__c}" style="display:none" />
                            <script>autocompleteParms["{!$Component.arinvtxn_sotax__c}"] = {query:"select id, name from rstk__sotax__c where rstk__sotax_div__r.rstk__sydiv_cmpno__c = '{!currentGlcmp.rstkf__glcmp_cmpno__c}'", queryParms:[], codeColumn:"id", descColumn:"Name"};</script>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_sotax__c}" rendered="{!OR(viewMode,AND(updateMode, OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == closedStatus)))}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval6__c.inlineHelpText}" id="pb_edit_op_dimval6">
                        <apex:outputLabel value="{!fdim.rstk__dimval6__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval6__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval6__c" value="{!dimvalrecord.rstk__dimval6__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions6}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval6__c}" rendered="{!viewMode}"/> 
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>        
                            
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_syvatclass__c.inlineHelpText}" id="pb_edit_op_syvatclass">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_syvatclass__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="arinvtxn_syvatclass__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syvatclass__c}" rendered="{!OR(createMode,AND(updateMode, OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == unpostedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == pendingStatus)))}" size="1" onchange="sotaxOrVatClassChanged('syvatclass');">
                                <apex:selectOptions value="{!syvatclasses}" />
                            </apex:selectList>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syvatclass__c}" rendered="{!OR(viewMode,AND(updateMode, OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == closedStatus)))}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>        
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval7__c.inlineHelpText}" id="pb_edit_op_dimval7">
                        <apex:outputLabel value="{!fdim.rstk__dimval7__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval7__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval7__c" value="{!dimvalrecord.rstk__dimval7__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions7}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval7__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>        
                            
                    <apex:pageBlockSectionItem helpText="{!f_armemo.rstkf__armemo_text__c.inlineHelpText}" id="pb_edit_op_armemotext">
                        <apex:outputLabel value="{!f_armemo.rstkf__armemo_text__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="armemotext" value="{!editARDrCrMemo.armemo.rstkf__armemo_text__c}" rendered="{!OR(createMode,updateMode )}"/>
                            <apex:outputField value="{!editARDrCrMemo.armemo.rstkf__armemo_text__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval8__c.inlineHelpText}" id="pb_edit_op_dimval8">
                        <apex:outputLabel value="{!fdim.rstk__dimval8__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval8__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval8__c" value="{!dimvalrecord.rstk__dimval8__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions8}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval8__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_syterms__c.inlineHelpText}" id="pb_edit_op_syterms">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_syterms__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="syterms" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syterms__c}" size="1" rendered="{!OR(createMode,updateMode)}">
                                <apex:selectOptions value="{!syterms}" /> 
                            </apex:selectList>
                            <!--  apex:inputField id="syterms" value="{!editARDrCrMemo.arinvtxn.arinvtxn_syterms__r.rstk__syterms_descr__c}" rendered="{!OR(createMode,updateMode,updateOffsetAcctMode)}"/-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syterms__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_soinv__c.inlineHelpText}" id="pb_edit_op_soinv">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_soinv__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:selectList id="soinv" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_soinv__c}" rendered="{!OR(createMode,updateMode,updateOffsetAcctMode)}" size="1">
                                <apex:selectOptions value="{!salesinvoices}" /> 
                            </apex:selectList-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_soinv__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvdue.rstkf__arinvdue_duedate__c.inlineHelpText}" id="pb_edit_op_duedate">
                        <apex:outputLabel value="{!f_arinvdue.rstkf__arinvdue_duedate__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="duedate" value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_duedate__c}" rendered="{!OR(createMode,updateMode )}"/> -->
                            <apex:outputField id="duedate" value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_duedate__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_arcashd__c.inlineHelpText}" id="pb_edit_op_arcashd">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_arcashd__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:selectList id="arcashd" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_arcashd__c}" rendered="{!OR(createMode,updateMode )}" size="1">
                                <apex:selectOptions value="{!cashreceipts}" /> 
                            </apex:selectList>-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_arcashd__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvdue.rstkf__arinvdue_discntduedate__c.inlineHelpText}" id="pb_edit_op_discntduedate">
                        <apex:outputLabel value="{!f_arinvdue.rstkf__arinvdue_discntduedate__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="discntduedate" value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_discntduedate__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_discntduedate__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_syforexschedno__c.inlineHelpText}" id="pb_edit_op_orderratepolicy" >
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_syforexschedno__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="orderratepolicy" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syforexschedno__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syforexschedno__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_maintcurr__c.inlineHelpText}" id="pb_edit_op_maintcurr" >
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_maintcurr__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="maintcurr" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintcurr__c}" rendered="{!OR(createMode,updateMode)}" size="1" onchange="getExchangeRate();">
                                <apex:selectOptions value="{!arcurrencys}" /> 
                            </apex:selectList>
                            <apex:inputHidden id="homecurr" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homecurr__c}" />
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintcurr__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvdue.rstkf__arinvdue_homeamt__c.inlineHelpText}" id="pb_edit_op_homeamt">
                        <apex:outputLabel value="{!f_arinvdue.rstkf__arinvdue_homeamt__c.label}"/>
                        <apex:outputPanel >                           
                            <apex:outputField value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_homeamt__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_exchrate__c.inlineHelpText}" id="pb_edit_op_exchrate" >
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_exchrate__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="exchrate" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_exchrate__c}" rendered="{!OR(createMode,updateMode)}" onchange="mainAmtChanged()" />
                            <apex:inputText id="syforexschedno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syforexschedno__c}" style="display:none" />
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_exchrate__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_sumhomevalue__c.inlineHelpText}" id="pb_edit_op_sumhomevalue">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_sumhomevalue__c.label}"/>
                        <apex:outputPanel >                           
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_sumhomevalue__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_summaintvalue__c.inlineHelpText}" id="pb_edit_op_summaintvalue">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_summaintvalue__c.label}"/>
                        <apex:outputPanel >                           
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_summaintvalue__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_armemo.rstkf__armemo_lastpprinted__c.inlineHelpText}" id="pb_edit_op_lastpprinted">
                        <apex:outputLabel value="{!f_armemo.rstkf__armemo_lastpprinted__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="lastpprinted" value="{!editARDrCrMemo.armemo.rstkf__armemo_lastpprinted__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.armemo.rstkf__armemo_lastpprinted__c}" rendered="{!OR(editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == creditMemoType,editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == debitMemoType)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_armemo.rstkf__armemo_isfinchg__c.inlineHelpText}" id="pb_edit_op_isfinchg">
                        <apex:outputLabel value="{!f_armemo.rstkf__armemo_isfinchg__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="isfinchg" value="{!editARDrCrMemo.armemo.rstkf__armemo_isfinchg__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.armemo.rstkf__armemo_isfinchg__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_whtadjtxn__c.inlineHelpText}" id="pb_edit_op_whtadjtxn">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_whtadjtxn__c.label}"/>
                        <apex:outputPanel >
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_whtadjtxn__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_armemo.rstkf__armemo_printed__c.inlineHelpText}" id="pb_edit_op_printed">
                        <apex:outputLabel value="{!f_armemo.rstkf__armemo_printed__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="printed" value="{!editARDrCrMemo.armemo.rstkf__armemo_printed__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.armemo.rstkf__armemo_printed__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem />
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_exppaymethod__c.inlineHelpText}" id="pb_edit_op_exppaymethod">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_exppaymethod__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="lastpprinted" value="{!editARDrCrMemo.armemo.rstkf__armemo_lastpprinted__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:inputField id="arinvtxn_exppaymethod__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_exppaymethod__c}" rendered="{!OR(createMode,updateMode)}" />
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_exppaymethod__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>    
                        
                    <!--  apex:pageBlockSectionItem helpText="{!f_arinvtxn.arinvtxn_socustcmpno__c.label}" id="pb_edit_op_socustcmpno">
                        <apex:outputLabel value="{!f_arinvtxn.arinvtxn_socustcmpno__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="arnsocustcmpno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socustcmpno__c}" rendered="{!OR(createMode,updateMode)}" size="1">
                                <apex:selectOptions value="{!CustomerCompany}" /> 
                            </apex:selectList>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socustcmpno__c}" rendered="{!OR(updateOffsetAcctMode,viewMode)}"/>                                                        
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem-->
                 </apex:pageblocksection>
                                  
                 <script>
                    setSelectListRequired("syterms");            
                    setSelectListRequired("arnsocust");
                    setSelectListRequired("arinvh");
                    setSelectListRequired("trantype");
                    setSelectListRequired("maintcurr");
                    setSelectListRequired("drSideglacct");
                    setSelectListRequired("drSideglacctupdateOffsetAcctMode");
                    setSelectListRequired("crSideglacct");
                    setSelectListRequired("crSideglacctupdateOffsetAcctMode");
                    addRequiredFieldDecoration("input[id*=':" + "maintamt" + "']");
                    //addRequiredFieldDecoration("input[id*=':" + "trandate" + "']");
                    addRequiredFieldDecoration("input[id*=':" + "exchrate" + "']");
                    addRequiredFieldDecoration("textarea[id*=':" + "armemotext" + "']");
                    addRequiredFieldDecoration("input[id*=':" + "homeamt" + "']");                                  
                    createMode = "{!createMode}";    
                    updateMode = "{!updateMode}";
                    multicurrency = "{!multicurrency}"; 
                    haveCreatedNewBatch = "{!haveCreatedNewBatch}";
                /*
                    var sytermElement = document.getElementById('pg:fm:memoEdit_pb:pb_edit:pb_edit_op_syterms:syterms');
                    if(sytermElement != null) {
                        //sytermElement.disabled = true;
                    }  */             
            </script>   
            <apex:tabPanel switchType="client" selectedTab="tab_Custom" id="theTabPanel">
                <apex:tab label="{!customFieldTabName}" name="tab_Custom" id="tab_Custom" rendered="{!hasCustomFields}">
                    <c:customFields cntr="{!controller}" cols="2"/>
                </apex:tab>
            </apex:tabPanel>    
            </apex:pageBlock>
            <!--apex:outputPanel rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == invoiceType }" style="position:auto;text-align:center">
                <input type="button" id="ShowArinvdist" value="{!$Label.Show_Receivable_Transaction_Distributions}" class="btn" onclick="openDistFramePopup();"/>
            </apex:outputPanel-->            
        </apex:outputPanel> 
        
        <apex:outputPanel id="arinvdistList">
            <div id="showArinvdistPopup" style="display:none">
                <apex:pageBlock title="{!$Label.rstkf__receivable_transaction_distributions}" id="dists" mode="detail" >
                    <apex:pageBlockTable id="distData" value="{!editARDrCrMemo.allArinvdists}" var="dist">                  
                        <apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_glacct__c.label}">
                            <apex:outputField id="distAcct" value="{!dist.rstkf__arinvdist_glacct__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_dramt__c.label}">
                            <apex:outputField id="distDramt" value="{!dist.rstkf__arinvdist_dramt__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_cramt__c.label}">
                            <apex:outputField id="distCramt" value="{!dist.rstkf__arinvdist_cramt__c}"/>
                        </apex:column>
                    </apex:pageBlockTable>
                    <p style="position:auto;text-align:center">
                        <input type="button" name="popupCancelButton" class="btn" value="{!$Label.pagevalClose}" onclick="unblockUI();" tabIndex="9992"/>
                    </p>
                </apex:pageBlock>
            </div>  
        </apex:outputPanel>  
            
        <apex:outputPanel id="arapplicList">
        	<apex:outputPanel id="op_arapplicList" rendered="{!showPayment}" >
        	<div id="showArapplicPopup" style="display:none">
                <apex:pageBlock title="{!$Label.rstkf__payment_application_details}" id="arapplics" mode="detail" >
                	<apex:pageMessages id="payment_pageMessages" />
                    <div style="overflow: scroll; height: 250px;">
                    <apex:pageBlockTable id="arapplicData" value="{!arapplics}" var="dist">      
                        <apex:column headerValue="">
                             <apex:outputLink rendered="{!dist.rstkf__arapplic_trantype__c == arItemAppliedString && dist.rstkf__arapplic_refarapplic__c == null && dist.rstkf__arapplic_orig_rev__c == originalArApplicString}" onclick="blockUI();unapplyCreditMemo('{!dist.Id}')">{!$Label.rstkf__unapply}</apex:outputLink>
                        </apex:column>  
                                    
                        <apex:column headerValue="{!f_arapplic.rstkf__arapplic_trandate__c.label}">
                            <apex:outputField id="trandate" value="{!dist.rstkf__arapplic_trandate__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arapplic.rstkf__arapplic_trantype__c.label}">
                            <apex:outputField id="trantype" value="{!dist.rstkf__arapplic_trantype__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arapplic.rstkf__arapplic_amtpay__c .label}">
                            <apex:outputField id="amtpay" value="{!dist.arapplic_amtpay__c }"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arapplic.rstkf__arapplic_amtmaint__c .label}">
                            <apex:outputField id="amtmaint" value="{!dist.arapplic_amtmaint__c }" rendered="true"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arapplic.rstkf__arapplic_arcashd__c.label}">
                            <apex:outputField id="arcashd" value="{!dist.rstkf__arapplic_arcashd__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arapplic.rstkf__arapplic_arapplic_applied__c.label}">
                            <apex:outputField id="applied" value="{!dist.rstkf__arapplic_arapplic_applied__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arapplic.rstkf__arapplic_arinvdue__c.label}">
                            <apex:outputField id="arinvdue" value="{!dist.rstkf__arapplic_arinvdue__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arapplic.rstkf__arapplic_comment__c.label}">
                            <apex:outputField id="comment" value="{!dist.rstkf__arapplic_comment__c}"/>
                        </apex:column>
                    </apex:pageBlockTable>        
                    </div>    
                </apex:pageBlock>
            <apex:pageBlock >
                <apex:pageBlockSection columns="1">
                    <apex:pageBlockSectionItem >
                        <p style="position:auto;text-align:center">
                            <input type="button" name="popupCancelButton" class="btn" value="{!$Label.pagevalClose}" onclick="unblockUI();" tabIndex="9992"/>
                        </p>
                    </apex:pageBlockSectionItem>    
                </apex:pageBlockSection>
            </apex:pageBlock>  
            </div>
            </apex:outputPanel>
        </apex:outputPanel>    
        
        <apex:outputPanel id="whtList" >
            <div id="showWhtPopup" style="display:none">
                <apex:pageBlock mode="detail" title="{!If(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus, $Label.rstkf__wht_for_posted_transactions, $Label.rstkf__wht_for_un_posted_transactions)}" id="whts" >
                        <apex:pageBlockSection id="pb_edit" columns="1">  
                            <apex:pageBlockSectionItem />
                            <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_dowht__c.inlineHelpText}" id="pb_edit_si_dowht">
                                <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_dowht__c.label}"/>
                                <apex:outputPanel id="pb_edit_op_dowht">
                                    <apex:inputField id="whtpct" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_dowht__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != postedStatus}" onchange="apwhtChanged()"/>
                                    <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_dowht__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus}"/>                            
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            
                            <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__arinvtxn_adjAmt__c.inlineHelpText}" id="pb_edit_si_adjAmt" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus}">
                                <apex:outputLabel value="{!f_customext.rstkf__arinvtxn_adjAmt__c.label}"/>
                                <apex:outputPanel id="pb_edit_op_adjAmt">
                                    <apex:inputField id="adjAmt" value="{!customext.rstkf__arinvtxn_adjAmt__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus}" />
                                    <!--apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_dowht__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus}"/-->                            
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>  
                        
                            <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_apwht__c.inlineHelpText}" id="pb_edit_si_apwht">
                                <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_apwht__c.label}"/>
                                <apex:outputPanel id="pb_edit_op_apwht">
                                    <apex:selectList id="arinvtxn_apwht__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_apwht__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != postedStatus}" size="1" onchange="getApWhtPct(this.value);">
                                        <apex:selectOptions value="{!apwhts}" />
                                    </apex:selectList>
                                    <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_apwht__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus}"/>                            
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>  
                        
                            <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_whtpct__c.inlineHelpText}" id="pb_edit_si_whtpct">
                                <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_whtpct__c.label}"/>
                                <apex:outputPanel id="pb_edit_op_whtpct">
                                    <apex:inputField id="whtpct" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_whtpct__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != postedStatus}" onchange="whtpctChagned()"/>
                                    <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_whtpct__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus}"/>                            
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>  
                        
                            <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_summaintamt__c.inlineHelpText}" id="pb_edit_si_summaintamt">
                                <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_summaintamt__c.label}"/>
                                <apex:outputPanel id="pb_edit_op_summaintamt">
                                    <apex:outputField id="summaintamt" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_summaintamt__c}" />                            
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>  
                        
                            <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_taxamt__c.inlineHelpText}" id="pb_edit_si_taxamt">
                                <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_taxamt__c.label}"/>
                                <apex:outputPanel id="pb_edit_op_taxamt">
                                    <apex:outputField id="taxamt" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_taxamt__c}" />                            
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>  
                        
                            <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_whtamt__c.inlineHelpText}" id="pb_edit_si_whtamt">
                                <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_whtamt__c.label}"/>
                                <apex:outputPanel id="pb_edit_op_whtamt">
                                    <!--apex:inputField id="whtamt" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_whtamt__c}" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != postedStatus}" /-->
                                    <apex:outputField id="whtamtOP" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_whtamt__c}" />                            
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>  
                            
                            <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__arinvtxn_totalWhtAdj__c.inlineHelpText}" id="pb_edit_si_totalWhtAdj" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus}">
                                <apex:outputLabel value="{!f_customext.rstkf__arinvtxn_totalWhtAdj__c.label}"/>
                                <apex:outputPanel id="pb_edit_op_totalWhtAdj">
                                    <apex:outputText id="totalWhtAdj" html-decimals="2" value="{!totalWhtAdj}" />
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>  
                            
                            <apex:pageBlockSectionItem />
                            <apex:pageBlockSectionItem >          
                                <apex:outputPanel rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != postedStatus}">
                                        <apex:outputLabel value=""/>
                                        <input type="button" name="saveButton" class="btn" value="{!$Label.btn_save}" onclick="blockUI();saveWHTPopup('true');" />
                                        <input type="button" name="CancelButton" class="btn" value="{!$Label.btn_cancel}" onclick="unblockUI();" />
                                </apex:outputPanel>                                
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem > 
                                <apex:outputPanel rendered="{!AND(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus,!isArwhtxnClaimed)}">
                                        <apex:outputLabel value=""/>
                                        <input type="button" name="createWHTButton" class="btn" value="{!$Label.Create_WHT_Adjustment}" onclick="validateCreateWHTAdj();" />
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c == postedStatus}">
                                        <apex:outputLabel value=""/>
                                        <input type="button" name="CancelButton2" class="btn" value="{!$Label.btn_cancel}" onclick="unblockUI();" />
                                </apex:outputPanel>
                                
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                </apex:pageBlock>  
            </div>
            <script>
                var summaintamt = "{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_summaintamt__c}";  
                var totalWhtAdj = "{!totalWhtAdj}"; 
            
                var whtpctEle = document.getElementById('pg:fm:whts:pb_edit:pb_edit_si_dowht:whtpct');
                if(whtpctEle != null) {
                    if(whtpctEle.checked == false) {
                        document.getElementById('pg:fm:whts:pb_edit:pb_edit_si_apwht:arinvtxn_apwht__c').disabled = true;
                        document.getElementById('pg:fm:whts:pb_edit:pb_edit_si_whtpct:whtpct').disabled = true;                    
                    }
                }    
            </script>
        </apex:outputPanel>
        <div id="pleaseWaitPopup" class="overlay">
            <span style="border-radius: 5px;color: #000;background-color: #fff;">
            </span>
        </div>    
        <apex:outputPanel id="overrideexchrate_op" >
            <div id="showOverrideexchratePopup" style="display:none">
                <apex:pageBlock mode="detail" title="{!$Label.rstkf__override_exchange_rate}" id="overrideexchrates" >
                    <apex:pageBlockSection id="pb_edit_overrideexchratesch" columns="1"> 
                        <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__arinvtxn_exchrate_schedule__c.inlineHelpText}" id="pb_edit_si_overrideexchratesch">
                            <apex:outputLabel value="{!f_customext.rstkf__arinvtxn_exchrate_schedule__c.label}"/>
                            <apex:outputPanel id="pb_edit_op_overrideexchratesch">                            
                                <apex:inputField id="arinvtxn_exchrate_schedule" value="{!customext.rstkf__arinvtxn_exchrate_schedule__c}" onchange="blockPopupUI('pleaseWaitPopup');exchrateScheduleChangedFunction(this.value);"/>                            
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__arinvtxn_override_schedule__c.inlineHelpText}" id="pb_edit_op_override_schedule">
                            <apex:outputLabel value="{!f_customext.rstkf__arinvtxn_override_schedule__c.label}"/>
                            <apex:outputPanel >
                                <apex:selectList id="arinvtxn_override_schedule__c" value="{!customext.rstkf__arinvtxn_override_schedule__c}" onchange="blockPopupUI('pleaseWaitPopup');overrideScheduleChanged(this.value);" size="5">
                                    <apex:selectOptions value="{!syforexschednos}" />
                                </apex:selectList>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem> 
                        <apex:pageBlockSectionItem helpText="{!f_customext.rstkf__arinvtxn_override_exchrate__c.inlineHelpText}" id="pb_edit_si_overrideexchrate">
                            <apex:outputLabel value="{!f_customext.rstkf__arinvtxn_override_exchrate__c.label}"/>
                            <apex:outputPanel id="pb_edit_op_overrideexchrate">                            
                                <apex:outputField id="arinvtxn_override_exchrate" value="{!customext.rstkf__arinvtxn_override_exchrate__c}" />                            
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem />          
                        <apex:pageBlockSectionItem >          
                            <apex:outputPanel rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.rstkf__arinvh_poststatus__c != postedStatus}">
                                <apex:outputLabel value=""/>
                                <input type="button" name="useSchButton" value="{!$Label.Use_Selected_Override_Schedule}" onclick="blockUI();saveOverrideRateCheck('false');" />
                                <input type="button" name="revSchButton" value="{!$Label.Revert_to_Current_Spot_Rate}" onclick="blockUI();saveOverrideRateCheck('true');" />
                                <input type="button" name="CancelButton" class="btn" value="{!$Label.btn_cancel}" onclick="unblockUI();" />
                            </apex:outputPanel>                                
                            </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                </apex:pageBlock>
            </div> 
            <script>
                var syforexschedno_schedtype = "{!editARDrCrMemo.arinvtxn.arinvtxn_syforexschedno__r.syforexschedno_schedtype__c}";  
                var currentSpotRateString = "{!currentSpotRateString}";
            
                if(syforexschedno_schedtype == currentSpotRateString) {
                    jQuery("[name$=revSchButton]").toggleClass('btnDisabled', true).attr('disabled','disabled');
                } else {
                    jQuery("[name$=revSchButton]").toggleClass('btn', true);
                }
                jQuery("[name$=useSchButton]").toggleClass('btnDisabled', true).attr('disabled','disabled');
                 
            </script>
        </apex:outputPanel> 
                        
        <apex:outputPanel id="emailTemplate">
            <div id="emailTemplateFramePopup" style="display:none">
                <apex:pageBlock title="{!$Label.rstkf__email_template}" id="emailtemplates" mode="detail">
                    <apex:pageBlockTable id="distData" value="{!editARDrCrMemo.allArinvdists}" var="dist">                  
                        <apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_glacct__c.label}">
                            <apex:outputField id="distAcct" value="{!dist.rstkf__arinvdist_glacct__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_dramt__c.label}">
                            <apex:outputField id="distDramt" value="{!dist.rstkf__arinvdist_dramt__c}"/>
                        </apex:column>
                        
                        <apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_cramt__c.label}">
                            <apex:outputField id="distCramt" value="{!dist.rstkf__arinvdist_cramt__c}"/>
                        </apex:column>
                    </apex:pageBlockTable>
                    <p style="position:auto;text-align:center">
                        <input type="button" name="Continue" class="btn" value="{!$Label.Continue}" onclick="unblockUI();" tabIndex="9992"/>
                    </p>
                    <p style="position:auto;text-align:center">
                        <input type="button" name="popupCancelButton" class="btn" value="{!$Label.pagevalClose}" onclick="unblockUI();" tabIndex="9992"/>
                    </p>
                </apex:pageBlock>
            </div>  
        </apex:outputPanel>     
        <apex:outputPanel rendered="{!viewMode}">
            <button style="visibility: hidden" class="btnSelectTemplate" rel="#winEmailTemplate"></button>
        </apex:outputPanel>    
        <div class="modal" id="winEmailTemplate" style="width:450px">
        <h1>{!$Label.Select_Email_Template}</h1>
        <apex:pageBlock >
            <apex:pageBlockSection columns="1">
                <apex:pageBlockSectionItem >
                    <apex:selectList id="selected_template__c" style="width:300px" multiselect="false" size="1">
                        <apex:selectOptions value="{!ArcntlEmailTemplates}"/>
                        </apex:selectList>
                </apex:pageBlockSectionItem>
               </apex:pageBlockSection>
        </apex:pageBlock>
        <button type="button" onclick="template_ok()">{!$Label.OK}</button>
        <button type="button" class="close" onclick="template_cancel()">{!$Label.Cancel}</button>
        </div> 
    </apex:form>
    <div id="message"></div>   
    <br />
    <br />        
    <apex:relatedList list="gltxns__r" rendered="{!showsideBarFlag}" id="gltxnLists" />
    <apex:relatedList list="arwhttxns__r" rendered="{!showsideBarFlag}" id="arwhttxnLists" />       
<!-- <c:footerInclude cntr="{!controller}" hideNotesAndAttachments="{!!AND(arcntlApBatchOptions,showHeaderFlag)}"/> -->
    <c:footerInclude cntr="{!controller}" />  
<script>
    function openDistFramePopup() { 
            showPopup('#showArinvdistPopup', 800, 400);
    }
    
    function doShowPaymentDetail() {
    		blockUI(); 
            showPaymentDetail();
    } 
    
    function openArapplicFramePopup() { 
            showPopup('#showArapplicPopup', 1100, 400);
    }  
       
    function openEmailTemplateFramePopup() { 
            showPopup('#emailTemplateFramePopup', 800, 400);
    }
    
    function openWHTFramePopup() { 
            showPopup('#showWhtPopup', 800, 400);
    }
    
    function saveOverrideRateCheck(isReverse) {
       console.log(' saveOverrideRateCheck called isReverse ',isReverse);
       var exchrate_schedule = jQuery("[id$=arinvtxn_exchrate_schedule]").attr('value');
       var override_schedule = jQuery("[id$=arinvtxn_override_schedule__c]").attr('value');
       var override_exchrate = jQuery("[id$=arinvtxn_override_exchrate]").attr('innerHTML');
       
       if(isReverse == 'true') {
           exchrate_schedule = null;
           override_schedule = null;
           override_exchrate = null;
       }
        
       console.log('exchrate_schedule ',exchrate_schedule);  
       console.log('override_schedule ',override_schedule);  
       console.log('override_exchrate ',override_exchrate);  
       saveOverrideRate(exchrate_schedule,override_schedule,override_exchrate,isReverse); 
    }   
       
    function exchrateScheduleChangedFunction(schedulechagned) {
       jQuery("[name$=useSchButton]").toggleClass('btnDisabled', true).attr('disabled','disabled');
       jQuery("[name$=useSchButton]").toggleClass('btn', false);
       jQuery("[id$=arinvtxn_override_exchrate]").attr('innerHTML',"");            
       exchrateScheduleChanged(schedulechagned);
    }   
       
    function overrideScheduleChanged(overrideScheduleId) {
        console.log('overrideScheduleChanged ',overrideScheduleId);
        var arcontrolacctdfltaracct = "";
        if(overrideScheduleId != null && overrideScheduleId != "") {
            jQuery("[name$=useSchButton]").toggleClass('btnDisabled', false).removeAttr('disabled');
            jQuery("[name$=useSchButton]").toggleClass('btn', true);
            var execQueryString = "select syforexschedno_exchrate__c from syforexschedno__c where id = '"+overrideScheduleId+"'";
            var syforexschednoResults = execQuery(execQueryString);            
            if( syforexschednoResults.length > 0) {
                arcontrolacctdfltaracct =  syforexschednoResults[0].syforexschedno_exchrate__c;                  
            }            
        } else {
            jQuery("[name$=useSchButton]").toggleClass('btnDisabled', true).attr('disabled','disabled');
            jQuery("[name$=useSchButton]").toggleClass('btn', false);
        }    
        console.log(' arcontrolacctdfltaracct ',arcontrolacctdfltaracct);            
        jQuery("[id$=arinvtxn_override_exchrate]").attr('innerHTML',arcontrolacctdfltaracct);     
        unblockPopupUI('pleaseWaitPopup');
    }    
       
    function showOverrideexchratePopup() { 
            var arinvtxn_maintcurr = "{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintcurr__c}";
            var arinvtxn_homecurr = "{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homecurr__c}";
            console.log('showOverrideexchratePopup arinvtxn_maintcurr ',arinvtxn_maintcurr);
            console.log('showOverrideexchratePopup arinvtxn_homecurr ',arinvtxn_homecurr);
            var local_numlockLength;
            var local_numlockQuery = "select id from syforexschedno__c "+
            " where syforexschedno_cmpno__c = '" + currentGlcmpId +"'"+
            " and syforexschedno_schedtype__c = 'Locked-In Commitment Rate'"+
            " and syforexschedno_funccurr__c = '" + arinvtxn_homecurr +"'"+ 
            " and syforexschedno_foreigncurr__c = '" + arinvtxn_maintcurr +"'"+
            " and syforexschedno_inactive__c = false ";
            console.log('showOverrideexchratePopup local_numlockQuery ',local_numlockQuery);
            var local_numlock = execQuery(local_numlockQuery);
            if(local_numlock != null){
                local_numlockLength = local_numlock.length;
                console.log('showOverrideexchratePopup local_numlockLength ',local_numlockLength);
            } 
        
            var local_numOverLength;
            var local_numOverQuery = "select id from syforexschedno__c "+
            " where syforexschedno_cmpno__c = '" + currentGlcmpId +"'"+
            " and syforexschedno_schedtype__c = 'Override Rate'"+
            " and syforexschedno_funccurr__c = '" + arinvtxn_homecurr +"'"+ 
            " and syforexschedno_foreigncurr__c = '" + arinvtxn_maintcurr +"'"+
            " and syforexschedno_inactive__c = false ";
            console.log('showOverrideexchratePopup local_numOverQuery ',local_numOverQuery);
            var local_numOver = execQuery(local_numlockQuery);
            if(local_numOver != null){
                local_numOverLength = local_numOver.length;
                console.log('showOverrideexchratePopup local_numOverLength ',local_numOverLength);
            }             
            if(local_numOverLength == 0 && local_numlockLength == 0) {
                alert('{!$Label.No_Override_or_Locked_In_Exchange_Rate_Schedules_exist_for_this_transaction_curr}');
            } else { 
                showPopup('#showOverrideexchratePopup', 750, 270);
                
                if(local_numlockLength > 0) {
                    var arinvtxn_exchrate_schedule = jQuery('select[id*=arinvtxn_exchrate_schedule]');
                    arinvtxn_exchrate_schedule[0].value = "Locked-In Commitment Rate";
                    exchrateScheduleChangedFunction('Locked-In Commitment Rate');
                } else {
                    if(local_numlockLength > 0) {
                        var arinvtxn_exchrate_schedule = jQuery('select[id*=arinvtxn_exchrate_schedule]');
                        arinvtxn_exchrate_schedule[0].value = "Override Rate";
                        exchrateScheduleChangedFunction('Override Rate');
                    }
                }
                console.log('showOverrideexchratePopup local_numOverLength ',local_numOverLength);
                console.log('showOverrideexchratePopup local_numlockLength ',local_numlockLength);
            }   
    }
                        
    var Label_Please_select_at_least_One_Entry = "{!$Label.Please_select_at_least_One_Entry}";
    var Label_Please_select_Only_One_Entry = "{!$Label.Please_select_Only_One_Entry}"; 
    var Label_Are_you_sure_you_want_to_delete_this_memo = "{!$Label.Are_you_sure_you_want_to_delete_this_memo}";
    var Label_Debit_Account_and_Credit_Account_can_not_be_same = "{!$Label.Debit_Account_and_Credit_Account_can_not_be_same}"; 
    var Label_Document_Number_already_exists_for_this_customer = "{!$Label.Document_Number_already_exists_for_this_customer}"; 
    var Label_Please_enter_Memo_Text = "{!$Label.Please_enter_Memo_Text}"; 
    var Label_Please_Enter_Valid_Amount = "{!$Label.Please_Enter_Valid_Amount}"; 
    var Label_Please_Enter_Valid_Exchange_Rate = "{!$Label.Please_Enter_Valid_Exchange_Rate}"; 
    var Label_Please_select_A_R_Currency = "{!$Label.Please_select_A_R_Currency}"; 
    var Label_Please_Select_Batch_Number = "{!$Label.Please_Select_Batch_Number}"; 
    var Label_Please_Select_Credit_Account = "{!$Label.Please_Select_Credit_Account}"; 
    var Label_Please_Select_Customer = "{!$Label.Please_Select_Customer}"; 
    var Label_Please_Select_Customer_having_Customer_Company_with_Valid_Credit_Account = "{!$Label.Please_Select_Customer_having_Customer_Company_with_Valid_Credit_Account}"; 
    var Label_Please_Select_Customer_having_Customer_Company_with_Valid_Debit_Account = "{!$Label.Please_Select_Customer_having_Customer_Company_with_Valid_Debit_Account}"; 
    var Label_Please_select_Debit_Account = "{!$Label.Please_select_Debit_Account}"; 
    var Label_Please_Select_Transaction_Type = "{!$Label.Please_Select_Transaction_Type}";
    var Label_Please_Select_Transaction_Date = "{!$Label.Please_Select_Transaction_Date}";
    var Label_Email_Template_is_not_specified_in_Accounts_Receivable_Control_of_Company = "{!$Label.Email_Template_is_not_specified_in_Accounts_Receivable_Control_of_Company}";                 
    var Label_Please_enter_Payment_Terms = "{!$Label.Please_enter_Payment_Terms}"; 
    var Adjustment_amount_cannot_exceed_remaining_transaction_amount_less_previous_adjus = "{!$Label.Adjustment_amount_cannot_exceed_remaining_transaction_amount_less_previous_adjus}";                    
    var Value_can_be_positive_above_zero_or_negative_less_than_zero = "{!$Label.Value_can_be_positive_above_zero_or_negative_less_than_zero}";
    var Adjustment_amount_cannot_exceed_WHT_Amount_plus_any_previous_adjustments = "{!$Label.Adjustment_amount_cannot_exceed_WHT_Amount_plus_any_previous_adjustments}";                    
                        
    var socustcpnoApwht = "{!editARDrCrMemo.arinvtxn.arinvtxn_socustcmpno__r.socustcmpno_apwht__c}";                    
    var socustcpnoApwhtPct = "{!editARDrCrMemo.arinvtxn.arinvtxn_socustcmpno__r.socustcmpno_apwht__r.apwht_pct__c}";
    var maintamtnotax = "{!editARDrCrMemo.arinvtxn.arinvtxn_maintamtnotax__c}";  
                        //var totalWhtAdj = "{!totalWhtAdj}";                    
</script>
</apex:page>