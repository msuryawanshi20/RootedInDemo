<apex:page id="pg" standardController="rstkf__arinvtxn__c" extensions="rstkf.ControllerExtnARDrCrMemo,rstkf.RemoteQueryController" sideBar="{!showsideBarFlag}" showHeader="{!showHeaderFlag}" action="{!doBeforePageLoad}">
<apex:variable var="o" value="{!rstkf__arinvtxn__c}" />
<apex:variable var="f" value="{!$ObjectType.rstkf__arinvh__c.fields}" />
<apex:variable var="f_arinvtxn" value="{!$ObjectType.rstkf__arinvtxn__c.fields}" />
<apex:variable var="f_armemo" value="{!$ObjectType.rstkf__armemo__c.fields}" />
<apex:variable var="f_arinvdue" value="{!$ObjectType.rstkf__arinvdue__c.fields}" />
<apex:variable var="f_arinvdist" value="{!$ObjectType.rstkf__arinvdist__c.fields}" />
<apex:variable var="fdim" value="{!$ObjectType.rstk__dimvals__c.fields}" />
<apex:variable var="f_customext" value="{!$ObjectType.rstkf__customextf__c.fields}" />

<apex:sectionHeader subtitle="{!$Label.rstkf__receivable_transaction}" rendered="{!showsideBarFlag}"/>
<script>
	var currentGlcmpId = "{!currentGlcmp.id}";
	function getJSSocustDetails(glsocust){
		console.log('Inisde getJSSocustDetails glsocust '+glsocust);
		console.log('Inisde currentGlcmpId '+currentGlcmpId);
	    Visualforce.remoting.Manager.invokeAction(  
	      '{!$RemoteAction.ControllerExtnARDrCrMemo.getSocustDetails}', //NameSpace  
	      glsocust,
	      currentGlcmpId,
	      function(result, event){
	      	if (event.status) {
				checkResult(result);
			} else if (event.type === 'exception') {
				alert("{!$Label.Exception}", event.message);
		          } else {
				alert("{!$Label.UnexpectedStatus}", event.message); 
	          }
	      }, {escape:false}
	  	);
    }
    
    function getAccountDescription(glacct,titlefieldID){
    	console.log(' glacct '+glacct);
    	console.log(' titlefieldID '+titlefieldID);
      	Visualforce.remoting.Manager.invokeAction(  
	        '{!$RemoteAction.ControllerExtnARDrCrMemo.getAccountDescription}', //NameSpace  
	        glacct,
	        function(result, event){
	        	if (event.status) {
					checkAccountDescriptionResult(result,titlefieldID);
				} else if (event.type === 'exception') {
					alert("{!$Label.Exception}", event.message);
	            } else {
					alert("{!$Label.UnexpectedStatus}", event.message); 
	            }
	        }, {escape:false}
   		);
    }
    
    function getExchangeRate(){
    	fromCurrency = document.getElementById('pg:fm:memoEdit_pb:pb_edit:pb_edit_op_maintcurr:maintcurr').value;    	 
    	toCurrency = document.getElementById('pg:fm:memoEdit_pb:pb_edit:pb_edit_op_maintcurr:homecurr').value;
    	inDate = '';    
    	console.log(' syCmpid '+syCmpid);
    	console.log(' fromCurrency '+fromCurrency);
    	console.log(' toCurrency '+toCurrency);
    	console.log(' inDate '+inDate);
      	Visualforce.remoting.Manager.invokeAction(  
	        '{!$RemoteAction.ControllerExtnARDrCrMemo.getExchangeRate}', //NameSpace  
	        syCmpid,
	        fromCurrency,
	        toCurrency,
	        inDate,
	        function(result, event){
	        	if (event.status) {
					checkExchangeRate(result);
				} else if (event.type === 'exception') {
					alert("{!$Label.Exception}", event.message);
	            } else {
					alert("{!$Label.UnexpectedStatus}", event.message); 
	            }
	        }, {escape:false}
   		);
    }
    
    function postTestEntryCheck() {
   		var testResultString = document.getElementById('pg:fm:testResultString').value;
   		if(testResultString != ''){
   			alert(testResultString);
   		}
   		document.getElementById('pg:fm:testResultString').value = '';
   	}
    
    var syCmpid = "{!currentGlcmp.glcmp_cmpno__c}";
    var homeCurrency = "{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homecurr__c}";
    
    function checkBatchSelected() {
    	var batches = document.getElementById('pg:fm:filterMemo:pb:fllterGlYear:filterbatchNo').value;
    	if(batches != '') {
    		document.getElementById('pg:fm:filterMemo:pb:filtertrantype:trantypes').value='';
    		document.getElementById('pg:fm:filterMemo:pb:filtersocust:socust').value='';
    		document.getElementById('pg:fm:filterMemo:pb:filterpoststatus:poststatus').value='';
    		document.getElementById('pg:fm:filterMemo:pb:filtertrantype:trantypes').disabled=true;
    		document.getElementById('pg:fm:filterMemo:pb:filtersocust:socust').disabled=true;
    		document.getElementById('pg:fm:filterMemo:pb:filterpoststatus:poststatus').disabled=true;    	
    	} else {
    		document.getElementById('pg:fm:filterMemo:pb:filtertrantype:trantypes').disabled=false;
    		document.getElementById('pg:fm:filterMemo:pb:filtersocust:socust').disabled=false;
    		document.getElementById('pg:fm:filterMemo:pb:filterpoststatus:poststatus').disabled=false;
    	}
    }
    var createMode = "{!createMode}"; 
    var updateMode = "{!updateMode}";
    var multicurrency = "{!multicurrency}";
    var haveCreatedNewBatch = "{!haveCreatedNewBatch}";
    
    function refreshParent() {
    	console.log(' Inside refreshParent');    	    	
    	window.parent.reloadMemos();        	
    }
    
    setSelectListRequired("arnsocust");
	setSelectListRequired("trantype");
	setSelectListRequired("maintcurr");
	setSelectListRequired("drSideglacct");
	setSelectListRequired("drSideglacctupdateOffsetAcctMode");
	setSelectListRequired("crSideglacct");
	setSelectListRequired("crSideglacctupdateOffsetAcctMode");
</script>
<c:standardHeader cntr="{!controller}" showHeader="false" customInclude="{!$Resource.rstkf__arCrDrMemo_cli}" enableQuickMenu="{!showsideBarFlag}"/>
<apex:stylesheet value="{!$Resource.rstkf__ModalPopup_css}"/>
<apex:includeScript value="{!$Resource.rstkf__RowHandler_js}"/>
<apex:includeScript value="{!$Resource.rstkf__BlockUI}" />
   <apex:form id="fm">          
        <apex:actionFunction name="addNewARDrCrMemo" action="{!addNewARDrCrMemo}" immediate="false" rerender="pageMessages,memoEdit,memoList" status="pleaseWaitStatus"/>
        <apex:actionFunction name="editARDrCrMemo" action="{!editARDrCrMemo}" rerender="pageMessages,memoEdit,memoList,testResultString" immediate="false" status="pleaseWaitStatus" oncomplete="postTestEntryCheck();">
            <apex:param name="selectedIndex" assignTo="{!selectedIndex}" value=""/>
            <apex:param name="editPart" assignTo="{!editPart}" value=""/>
        </apex:actionFunction>
        <apex:actionFunction name="showMemo" action="{!showMemoARDrCrMemo}" rerender="pageMessages,memoEdit,memoList,testResultString" immediate="false" status="pleaseWaitStatus" oncomplete="postTestEntryCheck();">
            <apex:param name="selectedIndex" assignTo="{!selectedIndex}" value=""/>
        </apex:actionFunction>
        <apex:actionFunction name="cancelAddOrEdit" action="{!cancelAddOrEdit}" immediate="false" status="pleaseWaitStatus" rerender="pageMessages,memoEdit,memoList"/>
        <apex:actionFunction name="getProjectsOfDiv" action="{!getProjectsOfDiv}" reRender="projectToSync" immediate="false" status="pleaseWaitStatus" />
        <apex:actionFunction name="saveARDrCrMemo" action="{!saveARDrCrMemo}" immediate="false" status="pleaseWaitStatus" oncomplete="getARDrCrMemoList()"/>
        <apex:actionFunction name="saveARDrCrMemoPopup" action="{!saveARDrCrMemo}" immediate="false" status="pleaseWaitStatus" rerender="pageMessages" oncomplete="refreshParent();">
       		<apex:param name="popupSave" assignTo="{!popupSave}" value=""/>
       	</apex:actionFunction>	
        <apex:actionFunction name="postARDrCrMemo" action="{!postARDrCrMemo}" immediate="false" status="pleaseWaitStatus"/>
        <apex:actionFunction name="deleteARDrCrMemo" action="{!deleteARDrCrMemo}" immediate="false" status="pleaseWaitStatus" oncomplete="getARDrCrMemoList()"/>        
        <apex:actionFunction name="getARDrCrMemoList" action="{!getARDrCrMemoList}" immediate="false" rerender="pageMessages,memoEdit,memoList" status="pleaseWaitStatus"/>
        <apex:actionStatus onstart="showTopDialog('pleaseWaitPopup');" onstop="closeTopDialog();" id="pleaseWaitStatus"/>
        <apex:inputHidden id="testResultString" value="{!testResultString}" />
        <!--  
        <<apex:pageblock id="filterMemo">        
            <apex:pageblocksection id="pb" columns="1">
                <apex:pageBlockSectionItem helpText="{!f_customext.custom_glcmp__c.inlineHelpText}">
                    <apex:outputLabel value="{!f_customext.custom_glcmp__c.label}"/>
                    <apex:outputPanel >
                        <apex:outputLink value="/{!currentGlcmp.id}">
                            <apex:outputField value="{!currentGlcmp.name}" />
                        </apex:outputLink>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.ardrcrmemo_batchNumber__c.inlineHelpText}" id="fllterGlYear">
                    <apex:outputLabel value="{!f_customext.ardrcrmemo_batchNumber__c.label}"/>
                    <apex:outputPanel >
                        <apex:selectList id="filterbatchNo" value="{!batchNo}" multiselect="true" size="5" onchange="checkBatchSelected()">
                            <apex:selectOptions value="{!batches}" /> 
                        </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.ardrcrmemo_trantype__c.inlineHelpText}" id="filtertrantype">
                    <apex:outputLabel value="{!f_customext.ardrcrmemo_trantype__c.label}"/>
                    <apex:outputPanel >
                        <apex:selectList id="trantypes" value="{!customext.ardrcrmemo_trantype__c}" size="1"> 
                            <apex:selectOptions value="{!txntype}" /> 
                        </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.ardrcrmemo_customer__c.inlineHelpText}" id="filtersocust">
                    <apex:outputLabel value="{!f_customext.ardrcrmemo_customer__c.label}"/>
                    <apex:outputPanel >
                        <apex:selectList id="socust" value="{!customext.ardrcrmemo_customer__c}" size="1">
                            <apex:selectOptions value="{!customers}" /> 
                        </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem helpText="{!f_customext.ardrcrmemo_status__c.inlineHelpText}" id="filterpoststatus">
                    <apex:outputLabel value="{!f_customext.ardrcrmemo_status__c.label}"/>
                    <apex:outputPanel >
                        <apex:selectList id="poststatus" value="{!customext.ardrcrmemo_status__c}" size="1"> 
                            <apex:selectOptions value="{!batchstatus}" /> 
                        </apex:selectList>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                    
                <apex:pageBlockSectionItem >
                    <apex:outputPanel >
                        <input type="button" id="getAllMemos" value="Get {!$Label.rstkf__receivable_transaction_distributions}s" class="btn" onclick="getAllMemosCheck();"/>
                    </apex:outputPanel> 
                </apex:pageBlockSectionItem>
            </apex:pageblocksection>
        </apex:pageblock>
        <apex:outputPanel id="memoList">
            <apex:pageBlock title="{!$Label.rstkf__receivable_transaction_distributions} List" id="memos" mode="detail" rendered="{!listViewMode}">
                <script>
                    var memoArray = []; counters = 0;  
                    var memosBlockTable;
                   </script>                
                <input type="button" id="addNewMemo" value="Add New Memo" class="btn" onclick="addNewMemocheck();"/>
                <input type="button" id="editMemo" value="Edit Memo" class="btn" onclick="editMemoCheck();"/>           
                <input type="button" id="editOffsetAccount" value="Edit Offset Account" class="btn" onclick="editOffsetAccountCheck();"/>     
                <input type="button" id="showMemo" value="Show Memo" class="btn" onclick="showMemoCheck();"/>            
                <apex:pageblocksection >
                    <apex:pageBlockSectionItem />
                </apex:pageblocksection>
                <apex:pageBlockTable id="memoData" value="{!aRDrCrMemos}" var="d">
                    <apex:column headerValue="Select">
                        <apex:inputCheckbox id="memoSelected" value="{!d.selected}" />
                    </apex:column>
                       
                    <apex:column headerValue="Batch #" rendered="{!arcntlApBatchOptions}">
                        <apex:outputField id="batchNo" value="{!d.arinvtxn.arinvtxn_arinvh__r.arinvh_batchno__c}"/>
                    </apex:column>
                    
                    <apex:column headerValue="Memo Type">
                        <apex:outputField id="memoType" value="{!d.arinvtxn.arinvtxn_trantype__c}"/>
                    </apex:column>
                    
                    <apex:column headerValue="Customer">
                        <apex:outputField id="customer" value="{!d.arinvtxn.arinvtxn_socust__c}"/>
                    </apex:column>
                    
                    <apex:column headerValue="Status">
                        <apex:outputText id="status" value="{!d.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c}"/>
                    </apex:column>
                    
                    <apex:column headerValue="Document #">
                        <apex:outputText id="document" value="{!d.arinvtxn.arinvtxn_docno__c}"/>
                    </apex:column>
                    
                    <apex:column headerValue="Tran ID">
                        <apex:outputText id="tranID" value="{!d.arinvtxn.arinvtxn_tranid__c}"/>
                    </apex:column>
                                                     
                    <apex:column headerValue="Memo date">
                        <apex:outputField id="memodate" value="{!d.arinvtxn.arinvtxn_trandate__c}"/>
                        <script>
                             memoArray[counters] = {
                                'selected': document.getElementById('{!$Component.memoSelected}'),
                                'batchNo': document.getElementById('{!$Component.batchNo}'),
                                'memoType': document.getElementById('{!$Component.memoType}'),
                                'customer': document.getElementById('{!$Component.customer}'),
                                'status': document.getElementById('{!$Component.status}'),
                                'document': document.getElementById('{!$Component.document}'),
                                'tranID': document.getElementById('{!$Component.tranID}'),
                                'memodate': document.getElementById('{!$Component.memodate}'),
                                'selectedIndex' : counters                
                             }                        
                             counters++;
                             var memosBlockTable = document.getElementById('{!$Component.memoData}');
                        </script>
                    </apex:column>               
                </apex:pageBlockTable>                          
            </apex:pageBlock>
            <apex:panelGrid columns="6" rendered="{!AND(showPopUpGridPanel,listViewMode)}">
				<apex:outputText > Page {!(setOfMemos.pageNumber)} of {!CEILING(noOfRecordsPopup / sizePopup)}  </apex:outputText>
              
              	<apex:commandLink status="fetchStatus" reRender="memoList" value="<<" action="{!firstOfsetOfMemos}" title="{!$Label.labelFirstPage}"/>
              	<apex:commandLink status="fetchStatus" reRender="memoList" value="Previous" action="{!previousOfsetOfMemos}" title="{!$Label.labelPreviousPage}"/>
              	<apex:commandLink status="fetchStatus" reRender="memoList" value="Next" action="{!nextOfsetOfMemos}" title="{!$Label.labelNextPage}"/>
              	<apex:commandLink status="fetchStatus" reRender="memoList" value=">>" action="{!lastOfsetOfMemos}" title="{!$Label.labelLastPage}"/>	
				
              	<apex:outputPanel style="color:#4AA02C;font-weight:bold">              
              		<apex:actionStatus id="fetchStatus" startText="Fetching..." stopText=""/>
              	</apex:outputPanel>
        	</apex:panelGrid>            
        </apex:outputPanel>   -->
        <apex:outputPanel id="memoEdit">
        	<apex:inputHidden id="arinvtxn_glacct__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_glacct__c}" />
        	<apex:inputHidden id="arnsocustcmpno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socustcmpno__c}" />
        	<apex:inputHidden id="arcontrolacct" value="{!arcontrolacct}" />
        	<apex:inputHidden id="arcontrolacctDesc" value="{!arcontrolacctDesc}" />
        	<script>
    			setSelectListRequired("arnsocust");
    			setSelectListRequired("trantype");
    			setSelectListRequired("maintcurr");
				setSelectListRequired("drSideglacct");
    			setSelectListRequired("drSideglacctupdateOffsetAcctMode");
    			setSelectListRequired("crSideglacct");
    			setSelectListRequired("crSideglacctupdateOffsetAcctMode");
    			addRequiredFieldDecoration("input[id$=':" + "maintamt" + "']");
    			addRequiredFieldDecoration("input[id$=':" + "exchrate" + "']");
    			addRequiredFieldDecoration("textarea[id$=':" + "armemotext" + "']");
    			addRequiredFieldDecoration("input[id$=':" + "homeamt" + "']");    			
    			createMode = "{!createMode}";    
    			updateMode = "{!updateMode}";
    			multicurrency = "{!multicurrency}";	
    			haveCreatedNewBatch = "{!haveCreatedNewBatch}";
    			
    			var sytermElement = document.getElementById('pg:fm:memoEdit_pb:pb_edit:pb_edit_op_syterms:syterms');
				if(sytermElement != null) {
					sytermElement.disabled = true;
				}	
    			
    		</script>
            <apex:pageBlock title="{!$Label.rstkf__receivable_transaction}" id="memoEdit_pb">
                <apex:pageBlockButtons >
                    <apex:outputPanel id="op_hdrbtns">
                        <apex:outputPanel id="op_hdrbtnsSave" rendered="{!AND(OR(createMode,updateMode),showsideBarFlag)}">
                            <input type="button" id="saveMemo" value="{!$Label.btn_save}" class="btn" onclick="saveMemoCheck();"/>
                            <input type="button" id="cancelMemo" value="{!$Label.btn_cancel}" class="btn" onclick="cancelAddOrEdit();" />                            
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsSavePopup" rendered="{!AND(OR(createMode,updateMode),!showsideBarFlag)}">
                            <input type="button" id="saveMemoPopup" value="{!$Label.Save_And_Close}" class="btn" onclick="saveMemoPopupCheck();"/>
                        </apex:outputPanel>                        
                        <!--
                        <apex:outputPanel id="op_hdrbtnsPost" rendered="{!If(AND(viewMode,editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Unbatched Postings Pending'),true,false)}">                     
                            <input type="button" id="postMemo" value="Post Memo" class="btn" onclick="postARDrCrMemo();"/>
                        </apex:outputPanel>
                         <apex:outputPanel id="op_hdrbtnsEdit" rendered="{!If(AND(viewMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Unbatched Postings Pending',editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Pending'),OR(editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == 'Credit Memo',editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == 'Debit Memo')),true,false)}">
                            <input type="button" id="editBody" value="Edit Body" class="btn" onclick="editBodyMemoCheck();"/>
                        </apex:outputPanel>
                        <apex:outputPanel id="op_hdrbtnsEditOffAcct" rendered="{!If(AND(viewMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Unbatched Postings Pending',editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Pending'),OR(editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == 'Credit Memo',editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == 'Debit Memo'),editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_batchsource__c == 'A/R Memo Entry'),true,false)}">   
                            <input type="button" id="editOffsetAccount" value="Edit Offset Account" class="btn" onclick="editOffsetAccountCheck();"/>
                        </apex:outputPanel> 
                        <apex:outputPanel id="op_hdrbtnsDelete" rendered="{!If(AND(viewMode,OR(editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Unbatched Postings Pending',editARDrCrMemo.arinvtxn.arinvtxn_arinvh__r.arinvh_poststatus__c == 'Pending')),true,false)}">                      
                            <input type="button" id="deleteMemo" value="Delete Memo" class="btn" onclick="deleteMemoCheck();"/>
                        </apex:outputPanel>   
                         -->                                      
                    </apex:outputPanel>
                </apex:pageBlockButtons>
                
                <apex:pageblocksection id="pb_edit" columns="2"> 
                	<apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_arinvh__c.inlineHelpText}" id="pb_edit_op_arinvh" rendered="{!arcntlApBatchOptions}">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_arinvh__c.label}"/>
                        <apex:outputPanel >                         
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_arinvh__c}" rendered="{!OR(updateMode,viewMode)}"/>
                            <apex:selectList id="arinvh" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_arinvh__c}" rendered="{!AND(createMode,showHeaderFlag)}" size="1">
                                <apex:selectOptions value="{!arinvhs}" /> 
                            </apex:selectList>                  
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>                    
                    <apex:pageBlockSectionItem rendered="{!arcntlApBatchOptions}"/>
                                   	
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_tranid__c.inlineHelpText}" id="pb_edit_op_tranid">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_tranid__c.label}"/>
                        <apex:outputPanel >                         
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_tranid__c}" rendered="{!OR(updateMode,viewMode)}"/>
                            <apex:outputText id="pending_id" value="Pending" rendered="{!createMode}"/>                         
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_billto__c.inlineHelpText}" id="pb_edit_op_billto">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_billto__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="billto" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_billto__c}" rendered="{!updateMode}" size="1" >
                                <apex:selectOptions value="{!CustomerAddress}" /> 
                            </apex:selectList>                            
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_billto__c}" rendered="{!OR(createMode,viewMode)}"/>                                                        
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>                    
                    <!--  apex:pageBlockSectionItem -->
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_socust__c.inlineHelpText}" id="pb_edit_op_socust">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_socust__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="arnsocust" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socust__c}" rendered="{!createMode}" size="1" onchange="socustChanged()">
                                <apex:selectOptions value="{!customers}" /> 
                            </apex:selectList>                            
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socust__c}" rendered="{!OR(AND(!createMode),updateMode,viewMode)}"/>                                                        
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_soinv__c.inlineHelpText}" id="pb_edit_op_soinv">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_soinv__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:selectList id="soinv" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_soinv__c}" rendered="{!OR(createMode,updateMode,updateOffsetAcctMode)}" size="1">
                                <apex:selectOptions value="{!salesinvoices}" /> 
                            </apex:selectList-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_soinv__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_docno__c.inlineHelpText}" id="pb_edit_op_docno">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_docno__c.label}"/>
                        <apex:outputPanel >
                        	<!--  <apex:inputField id="docno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_docno__c}" onchange="arinvtxnDocnoChanged()"/> -->                            
                            <apex:inputField id="docno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_docno__c}" rendered="{!createMode}" onchange="arinvtxnDocnoChanged()"/>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_docno__c}" rendered="{!OR(updateMode,viewMode)}"/>
                        	
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_arcashd__c.inlineHelpText}" id="pb_edit_op_arcashd">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_arcashd__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:selectList id="arcashd" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_arcashd__c}" rendered="{!OR(createMode,updateMode )}" size="1">
                                <apex:selectOptions value="{!cashreceipts}" /> 
                            </apex:selectList>-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_arcashd__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_trantype__c.inlineHelpText}" id="pb_edit_op_trantype">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_trantype__c.label}"/>
                        <apex:outputPanel >
                        	<apex:selectList id="trantype" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c}" size="1" rendered="{!createMode}" onchange="trantypeChanged('','false','');"> 
                            	<apex:selectOptions value="{!txntype}" /> 
                        	</apex:selectList>
                            <!--<apex:inputField id="trantype" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c}" rendered="{!createMode}" onchange="trantypeChanged('','false','');"/>-->
                            <apex:outputField id="trantypeOptxt" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c}" rendered="{!OR(updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_gldiv__c.inlineHelpText}" id="pb_edit_op_gldiv">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_gldiv__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="arinvtxn_gldiv__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_gldiv__c}" rendered="{!OR(createMode,updateMode )}" size="1" onchange="ardivChanged();">
                                <apex:selectOptions value="{!gldivs}" />
                            </apex:selectList>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_gldiv__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_trandate__c.inlineHelpText}" id="pb_edit_op_trandate">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_trandate__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="trandate" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trandate__c}" rendered="{!AND(createMode,!haveCreatedNewBatch)}"/>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trandate__c}" rendered="{!OR(updateMode,viewMode)}"/>
                            <apex:outputText value="{!newBatchTranDate}" rendered="{!AND(createMode,haveCreatedNewBatch)}"/>
                            <apex:outputText value="{!haveCreatedNewBatch}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_glproj__c.inlineHelpText}" id="pb_edit_op_glproj">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_glproj__c.label}"/>
                        <apex:outputPanel id="projectToSync">
                            <apex:selectList id="arinvtxn_glproj__c" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_glproj__c}" rendered="{!OR(createMode,updateMode )}" size="1">
                                <apex:selectOptions value="{!projects}" /> 
                            </apex:selectList>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_glproj__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_syterms__c.inlineHelpText}" id="pb_edit_op_syterms">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_syterms__c.label}"/>
                        <apex:outputPanel >
                        	<apex:selectList id="syterms" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syterms__c}" size="1" rendered="{!createMode}">
                                <apex:selectOptions value="{!syterms}" /> 
                            </apex:selectList>
                            <!--  apex:inputField id="syterms" value="{!editARDrCrMemo.arinvtxn.arinvtxn_syterms__r.rstk__syterms_descr__c}" rendered="{!OR(createMode,updateMode,updateOffsetAcctMode)}"/-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_syterms__c}" rendered="{!OR(updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval1__c.inlineHelpText}">
                        <apex:outputLabel value="{!fdim.rstk__dimval1__c.label}"/>
                        <apex:outputPanel >
                                <span id="modalstatic_dimvals_dimval1__c"></span>
                                <apex:selectlist id="modal_dimvals_dimval1__c" value="{!dimvalrecord.rstk__dimval1__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                        <apex:selectOptions value="{!dimValsOptions1}"/>
                                </apex:selectlist>
                                <apex:outputField value="{!dimvalrecord.rstk__dimval1__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvdue.rstkf__arinvdue_duedate__c.inlineHelpText}" id="pb_edit_op_duedate">
                        <apex:outputLabel value="{!f_arinvdue.rstkf__arinvdue_duedate__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="duedate" value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_duedate__c}" rendered="{!OR(createMode,updateMode )}"/> -->
                            <apex:outputField id="duedate" value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_duedate__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval2__c.inlineHelpText}">
                        <apex:outputLabel value="{!fdim.rstk__dimval2__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval2__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval2__c" value="{!dimvalrecord.rstk__dimval2__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions2}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval2__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvdue.rstkf__arinvdue_discntduedate__c.inlineHelpText}" id="pb_edit_op_discntduedate">
                        <apex:outputLabel value="{!f_arinvdue.rstkf__arinvdue_discntduedate__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="discntduedate" value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_discntduedate__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.arinvdue.rstkf__arinvdue_discntduedate__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval3__c.inlineHelpText}">
                        <apex:outputLabel value="{!fdim.rstk__dimval3__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval3__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval3__c" value="{!dimvalrecord.rstk__dimval3__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                <apex:selectOptions value="{!dimValsOptions3}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval3__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!!multicurrency}" />
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_maintamt__c.inlineHelpText}" id="pb_edit_op_maintamt" rendered="{!multicurrency}">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_maintamt__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="maintamt" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintamt__c}" rendered="{!OR(createMode,updateMode )}" onchange="mainAmtChanged()"/>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintamt__c}" rendered="{!viewMode}"/> 
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval4__c.inlineHelpText}">
                        <apex:outputLabel value="{!fdim.rstk__dimval4__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval4__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval4__c" value="{!dimvalrecord.rstk__dimval4__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions4}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval4__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!!multicurrency}" />
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_maintvalue__c.inlineHelpText}" id="pb_edit_op_maintvalue" rendered="{!multicurrency}">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_maintvalue__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="maintvalue" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintvalue__c}" rendered="{!OR(createMode,updateMode)}" />-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintvalue__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval5__c.inlineHelpText}">
                        <apex:outputLabel value="{!fdim.rstk__dimval5__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval5__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval5__c" value="{!dimvalrecord.rstk__dimval5__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions5}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval5__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!!multicurrency}" />
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_maintcurr__c.inlineHelpText}" id="pb_edit_op_maintcurr" rendered="{!multicurrency}">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_maintcurr__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="maintcurr" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintcurr__c}" rendered="{!OR(createMode,updateMode)}" size="1" onchange="getExchangeRate();">
                                <apex:selectOptions value="{!arcurrencys}" /> 
                            </apex:selectList>
                            <apex:inputHidden id="homecurr" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homecurr__c}" />
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_maintcurr__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval6__c.inlineHelpText}">
                        <apex:outputLabel value="{!fdim.rstk__dimval6__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval6__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval6__c" value="{!dimvalrecord.rstk__dimval6__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions6}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval6__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!!multicurrency}" />
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_exchrate__c.inlineHelpText}" id="pb_edit_op_exchrate" rendered="{!multicurrency}">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_exchrate__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="exchrate" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_exchrate__c}" rendered="{!OR(createMode,updateMode)}" onchange="mainAmtChanged()" />
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_exchrate__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval7__c.inlineHelpText}">
                        <apex:outputLabel value="{!fdim.rstk__dimval7__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval7__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval7__c" value="{!dimvalrecord.rstk__dimval7__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions7}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval7__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem rendered="{!!multicurrency}" />
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_orderratepolicy__c.inlineHelpText}" id="pb_edit_op_orderratepolicy" rendered="{!multicurrency}">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_orderratepolicy__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="orderratepolicy" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_orderratepolicy__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_orderratepolicy__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!fdim.rstk__dimval8__c.inlineHelpText}">
                        <apex:outputLabel value="{!fdim.rstk__dimval8__c.label}"/>
                        <apex:outputPanel >
                            <span id="modalstatic_dimvals_dimval8__c"></span>
                            <apex:selectlist id="modal_dimvals_dimval8__c" value="{!dimvalrecord.rstk__dimval8__c}" style="width:400px;" size="1" rendered="{!OR(createMode,updateMode)}">
                                    <apex:selectOptions value="{!dimValsOptions8}"/>
                            </apex:selectlist>
                            <apex:outputField value="{!dimvalrecord.rstk__dimval8__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_homeamt__c.inlineHelpText}" id="pb_edit_op_homeamt">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_homeamt__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="homeamt" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homeamt__c}" rendered="{!AND(!multicurrency,OR(createMode,updateMode))}" onchange="homeAmtChanged()" />
                            <apex:outputField id="homeamtOptxt" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homeamt__c}" rendered="{!OR(viewMode,AND(multicurrency,OR(createMode,updateMode)))}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem />
                    <!--  apex:pageBlockSectionItem helpText="{!f_arinvtxn.arinvtxn_gltxncntl__c.label}" id="pb_edit_op_gltxncntl">
                        <apex:outputLabel value="{!f_arinvtxn.arinvtxn_gltxncntl__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="gltxncntl" value="{!editARDrCrMemo.arinvtxn.arinvtxn_gltxncntl__c}" rendered="{!OR(createMode,updateMode )}" size="1">
                                <apex:selectOptions value="{!gltxncntls}" /> 
                            </apex:selectList>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.arinvtxn_gltxncntl__c}" rendered="{!OR(createMode,updateMode,updateOffsetAcctMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem-->
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_homenetchange__c.inlineHelpText}" id="pb_edit_op_homenetchange">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_homenetchange__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="homenetchange" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homenetchange__c}" rendered="{!OR(createMode,updateMode)}" />-->
                            <apex:outputField id="homenetchange" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homenetchange__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_armemo.rstkf__armemo_isfinchg__c.inlineHelpText}" id="pb_edit_op_isfinchg">
                        <apex:outputLabel value="{!f_armemo.rstkf__armemo_isfinchg__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="isfinchg" value="{!editARDrCrMemo.armemo.rstkf__armemo_isfinchg__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.armemo.rstkf__armemo_isfinchg__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvtxn.rstkf__arinvtxn_homevalue__c.inlineHelpText}" id="pb_edit_op_homevalue">
                        <apex:outputLabel value="{!f_arinvtxn.rstkf__arinvtxn_homevalue__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="homevalue" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homevalue__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField id="homevalue" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_homevalue__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                     <apex:pageBlockSectionItem helpText="{!f_armemo.rstkf__armemo_printed__c.inlineHelpText}" id="pb_edit_op_printed">
                        <apex:outputLabel value="{!f_armemo.rstkf__armemo_printed__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="printed" value="{!editARDrCrMemo.armemo.rstkf__armemo_printed__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.armemo.rstkf__armemo_printed__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_armemo.rstkf__armemo_text__c.inlineHelpText}" id="pb_edit_op_armemotext">
                        <apex:outputLabel value="{!f_armemo.rstkf__armemo_text__c.label}"/>
                        <apex:outputPanel >
                            <apex:inputField id="armemotext" value="{!editARDrCrMemo.armemo.rstkf__armemo_text__c}" rendered="{!OR(createMode,updateMode )}"/>
                            <apex:outputField value="{!editARDrCrMemo.armemo.rstkf__armemo_text__c}" rendered="{!viewMode}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_armemo.rstkf__armemo_lastpprinted__c.inlineHelpText}" id="pb_edit_op_lastpprinted">
                        <apex:outputLabel value="{!f_armemo.rstkf__armemo_lastpprinted__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="lastpprinted" value="{!editARDrCrMemo.armemo.rstkf__armemo_lastpprinted__c}" rendered="{!OR(createMode,updateMode )}"/>-->
                            <apex:outputField value="{!editARDrCrMemo.armemo.rstkf__armemo_lastpprinted__c}" rendered="{!OR(createMode,updateMode,viewMode)}"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="Debit Account Info" id="pb_edit_pbs_drSideglacctinfo">
                        <apex:outputLabel value=""/>
                    </apex:pageBlockSectionItem>    
                    <apex:pageBlockSectionItem helpText="Credit Account Info" id="pb_edit_pbs_crSideglacctinfo">
                        <apex:outputLabel value=""/>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvdist.rstkf__arinvdist_glacct__c.inlineHelpText}" id="pb_edit_pbs_drSideglacct" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c != invoiceType }">
                        <apex:outputLabel value="{!f_arinvdist.rstkf__arinvdist_glacct__c.label}"/>
                        <apex:outputPanel >
                       		<!-- apex:selectList id="drSideglacct" value="{!editARDrCrMemo.drSide.rstkf__arinvdist_glacct__c}" rendered="{!OR(createMode,updateOffsetAcctMode)}" size="1"-->
                        
                            <apex:selectList id="drSideglacct" value="{!editARDrCrMemo.drSide.rstkf__arinvdist_glacct__c}" rendered="{!createMode}" size="1" onchange="getAccountDescription(this.value,'drSideglacct');">
                                <apex:selectOptions value="{!accts}" /> 
                            </apex:selectList>
                            
                            <apex:selectList id="drSideglacctupdateOffsetAcctMode" value="{!editARDrCrMemo.drSide.rstkf__arinvdist_glacct__c}" rendered="{!AND(updateMode,editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == 'Credit Memo')}" size="1" onchange="getAccountDescription(this.value,'drSideglacct');">
                                <apex:selectOptions value="{!accts}" /> 
                            </apex:selectList>
                            
                            <apex:outputField value="{!editARDrCrMemo.drSide.rstkf__arinvdist_glacct__c}" rendered="{!OR(AND(updateMode,editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == 'Debit Memo'),viewMode)}" id="pb_edit_op_drSideglacct"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvdist.rstkf__arinvdist_glacct__c.inlineHelpText}" id="pb_edit_pbs_crSideglacct" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c != invoiceType }">
                        <apex:outputLabel value="{!f_arinvdist.rstkf__arinvdist_glacct__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:selectList id="crSideglacct" value="{!editARDrCrMemo.crSide.rstkf__arinvdist_glacct__c}"  rendered="{!OR(createMode,updateOffsetAcctMode)}" size="1" disabled="true"-->
                            <apex:selectList id="crSideglacct" value="{!editARDrCrMemo.crSide.rstkf__arinvdist_glacct__c}"  rendered="{!createMode}" size="1" onchange="getAccountDescription(this.value,'crSideglacct');">
                                <apex:selectOptions value="{!accts}" /> 
                            </apex:selectList>
                            
                             
                            <apex:selectList id="crSideglacctupdateOffsetAcctMode" value="{!editARDrCrMemo.crSide.rstkf__arinvdist_glacct__c}"  rendered="{!AND(updateMode,editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == 'Debit Memo')}" size="1" onchange="getAccountDescription(this.value,'crSideglacct');">
                                <apex:selectOptions value="{!accts}" /> 
                            </apex:selectList>
                            
                            <apex:outputField value="{!editARDrCrMemo.crSide.rstkf__arinvdist_glacct__c}" rendered="{!OR(AND(updateMode,editARDrCrMemo.arinvtxn.rstkf__arinvtxn_trantype__c == 'Credit Memo'),viewMode)}" id="pb_edit_op_crSideglacct"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="Account Description" id="pb_edit_pbs_drSideGlacctDesc" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c != invoiceType }">
                        <apex:outputLabel value="Account Description"/>
                        <apex:outputPanel >
                            <apex:outputField value="{!editARDrCrMemo.drSide.arinvdist_glacct__r.rstkf__glacct_desc__c}" rendered="{!OR(createMode,updateMode,viewMode)}" id="pb_edit_op_drSideGlacctDesc"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="Account Description" id="pb_edit_pbs_crSideGlacctDesc" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c != invoiceType }">
                        <apex:outputLabel value="Account Description"/>
                        <apex:outputPanel >
                            <apex:outputField value="{!editARDrCrMemo.crSide.arinvdist_glacct__r.rstkf__glacct_desc__c}" rendered="{!OR(createMode,updateMode,viewMode)}" id="pb_edit_op_crSideGlacctDesc"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <apex:pageBlockSectionItem helpText="{!f_arinvdist.rstkf__arinvdist_dramt__c.inlineHelpText}" id="pb_edit_pbs_drSidedramt" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c != invoiceType }">
                        <apex:outputLabel value="{!f_arinvdist.rstkf__arinvdist_dramt__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="drSidedramt" value="{!editARDrCrMemo.drSide.rstkf__arinvdist_dramt__c}" rendered="{!OR(createMode,updateOffsetAcctMode)}"/>-->
                            <apex:outputField id="drSidedramt" value="{!editARDrCrMemo.drSide.rstkf__arinvdist_dramt__c}" rendered="{!OR(createMode,updateMode,viewMode)}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem helpText="{!f_arinvdist.rstkf__arinvdist_cramt__c.inlineHelpText}" id="pb_edit_pbs_crSidedramt" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c != invoiceType }">
                        <apex:outputLabel value="{!f_arinvdist.rstkf__arinvdist_cramt__c.label}"/>
                        <apex:outputPanel >
                            <!--  apex:inputField id="crSidedramt" value="{!editARDrCrMemo.crSide.rstkf__arinvdist_cramt__c}" rendered="{!OR(createMode,updateOffsetAcctMode)}"/>-->
                            <apex:outputField id="crSidedramt" value="{!editARDrCrMemo.crSide.rstkf__arinvdist_cramt__c}" rendered="{!OR(createMode,updateMode,viewMode)}" />
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    
                    <!--  apex:pageBlockSectionItem helpText="{!f_arinvtxn.arinvtxn_socustcmpno__c.label}" id="pb_edit_op_socustcmpno">
                        <apex:outputLabel value="{!f_arinvtxn.arinvtxn_socustcmpno__c.label}"/>
                        <apex:outputPanel >
                            <apex:selectList id="arnsocustcmpno" value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socustcmpno__c}" rendered="{!OR(createMode,updateMode)}" size="1">
                                <apex:selectOptions value="{!CustomerCompany}" /> 
                            </apex:selectList>
                            <apex:outputField value="{!editARDrCrMemo.arinvtxn.rstkf__arinvtxn_socustcmpno__c}" rendered="{!OR(updateOffsetAcctMode,viewMode)}"/>                                                        
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem-->
                 </apex:pageblocksection>   
            </apex:pageBlock>
            <apex:outputPanel rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == invoiceType }" style="position:auto;text-align:center">
            	<input type="button" id="ShowArinvdist" value="{!$Label.Show_Receivable_Transaction_Distributions}" class="btn" onclick="openDistFramePopup();"/>
            </apex:outputPanel>            
        </apex:outputPanel> 
        
        <apex:outputPanel id="arinvdistList">
        	<div id="showArinvdistPopup" style="display:none">
	        	<apex:pageBlock title="{!$Label.rstkf__receivable_transaction_distributions}" id="dists" mode="detail" rendered="{!editARDrCrMemo.arinvtxn.arinvtxn_trantype__c == invoiceType }">
	        		<apex:pageBlockTable id="distData" value="{!editARDrCrMemo.allArinvdists}" var="dist">        			
	                 	<apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_glacct__c.label}">
	                     	<apex:outputField id="distAcct" value="{!dist.rstkf__arinvdist_glacct__c}"/>
	                 	</apex:column>
	                 	
	                 	<apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_dramt__c.label}">
	                     	<apex:outputField id="distDramt" value="{!dist.rstkf__arinvdist_dramt__c}"/>
	                 	</apex:column>
	                 	
	                 	<apex:column headerValue="{!f_arinvdist.rstkf__arinvdist_cramt__c.label}">
	                     	<apex:outputField id="distCramt" value="{!dist.rstkf__arinvdist_cramt__c}"/>
	                 	</apex:column>
	        		</apex:pageBlockTable>
	        		<p style="position:auto;text-align:center">
						<input type="button" name="popupCancelButton" class="btn" value="{!$Label.pagevalClose}" onclick="unblockUI();" tabIndex="9992"/>
					</p>
	        	</apex:pageBlock>
	        </div>	
        </apex:outputPanel>        
         
    </apex:form>
<c:footerInclude cntr="{!controller}" hideNotesAndAttachments="true"/>
<script>
	function openDistFramePopup() { 
     		showPopup('#showArinvdistPopup', 800, 400);
	}
    var Label_Please_select_at_least_One_Entry = "{!$Label.Please_select_at_least_One_Entry}";
    var Label_Please_select_Only_One_Entry = "{!$Label.Please_select_Only_One_Entry}";                  
</script>
</apex:page>